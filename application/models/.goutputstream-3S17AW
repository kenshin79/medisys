<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Admission_model extends CI_Model {
      
	  var $date_in="";
	  var $date_out="";
	  var $source="";
	  var $location="";
	  var $bed="";
	  var $type="";
          var $dispo="";
	  var $p_id="";
          /*leave off POD for ER
          //var $pod_id=""; 
          */
	  var $sr_id="";
	  var $r_id="";
          var $sic="";
	  var $service="";
	  var $plist="";
	  var $meds="";
	  var $refs="";
	  var $erefs="";
	  var $notes="";
	  var $pcpdx="";
	  var $abstract="";
          var $dsummary="";
          var $sagip="";
          var $home="";
	  var $cbc="";
          var $bloodchem="";
	  var $protime="";
	  var $urine="";
	  var $abg="";
	  var $fecalysis="";
	  var $uchem="";
	  var $culture="";
	  var $imaging="";
	  var $ecg="";
	  var $others="";
	  var $c_notes="";
	  var $cbc2="";
          var $bloodchem2="";
	  var $protime2="";
	  var $urine2="";
	  var $abg2="";
	  var $fecalysis2="";
	  var $uchem2="";
	  var $culture2="";
	  var $imaging2="";
	  var $ecg2="";
	  var $others2="";

      function __construct() {
          parent::__construct();
      }
	  
	  //select
	  function get_alla(){
		  $this->db->from('admissions');
		  $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
		  $this->db->order_by('dispo asc, type desc, service asc, location asc, date_in asc');
		  $query = $this->db->get(); 
		  return $query->result();
          
	  }
          //GM service report
          function gm_report($service, $date1, $date2)
          {
           $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
           if (!strcmp($service, 'All'))
           {
            $this->db->from('admissions');
	    $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
	    $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
            $this->db->where($datewhere);
	    $this->db->order_by('dispo asc, service asc, type desc,  date_in desc');
	    $query = $this->db->get();
	    return $query->result();
           }
           else
           {
            $this->db->from('admissions');
	    $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
	    $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
	    $this->db->where('service', $service);
            $this->db->where($datewhere);
	    $this->db->order_by('type desc, dispo asc, date_in desc, location asc');
	    $query = $this->db->get();
	    return $query->result();
           }

          }	  


	  //create one GM census (for editable )
	  function get_gm_census($service, $disp){
	      	  	
	  	  if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		         $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
                        
                           
			 $this->db->order_by('type desc, location asc, bed asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
	  	  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		         $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('type desc, location asc, date_out desc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  
	  }

          //create one GM census (for census )
	  function get_print_census($service, $disp){
	      	  	
	  	  
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		         $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
                         $this->db->where('type !=', 'Pre-operative');
			 $this->db->order_by('type desc, location asc, bed asc');
			 $query = $this->db->get();
			 return $query->result();
		
		  		  
	  }
	  //create census for ALL GM (non-editable)
	  function a_get_gm_census($disp){
	  	  if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('service asc, type desc,  location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
	  	  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('service asc, type desc, location asc, date_out desc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  
	  }	  
	  //create census by location
	  function get_loc_census($location, $disp){
	  	   if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  
	  }
	  //create census for one GM service by date of dispo
	  function get_date_census($location, $disp, $service, $date){
	  	  if (!strcmp($dispo, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where('service', $service);
			 $this->db->where('date_in', $date);
			 $this->db->order_by('type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('service', $service);
			 $this->db->where('date_out', $date);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
		  
	  }
	  //create census by source by service
	  function get_source_census($disp, $service, $source){
	  	  if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('source', $source);
			 $this->db->where('dispo', $disp);
			 $this->db->where('service', $service);
			 $this->db->order_by('service asc, type desc, location asc ');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('source', $source);
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('service asc, type desc, location asc ');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  
	  }	  
	  //create census for ALL GM services by date of dispo 
	  function a_get_date_census($location, $disp, $service, $date){
	  	  if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where('date_in', $date);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where('date_out', $date);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
		  
	  }	  
      //create census of ALL GM services by source
	  function a_get_source_census($disp, $service, $source){
	  	  if (!strcmp($disp, "Admitted")){
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('source', $source);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('service asc, type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('source', $source);
			 $this->db->where('dispo', $disp);
			 $this->db->order_by('service asc, type desc, location asc, service asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }	  
	  //create census by period for one GM service
	  function get_period_census($location, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where('service', $service);
			 $this->db->where($datewhere);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
			 $this->db->where($datewhere);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }
	  //create period census for ALL GM services
	  function a_get_period_census($location, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where($datewhere);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('location', $location);
			 $this->db->where('dispo', $disp);
			 $this->db->where($datewhere);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }
	  //create list of admissions with a diagnosis
	  function get_problem_census($term){
		  $this->db->from('admissions');
		  $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
		  $this->db->like('plist', $term);
		  $this->db->order_by('type desc, service asc');
		  $query = $this->db->get(); 
          return $query->result(); 
	  }	 
	  //create list of admissions with a medication
	  function get_meds_census($term){
		  $this->db->from('admissions');
		  $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
		  $this->db->like('meds', $term);
		  $this->db->order_by('type desc, service asc');
		  $query = $this->db->get(); 
          return $query->result(); 
	  }	  	
	  //create list of admissions with an intradepartmental referral in one GM services
	  function get_refer_census($refer, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->where('service', $service);
			 $this->db->where($datewhere);
			 $this->db->like('refs', $refer);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
			 $this->db->like('refs', $refer);
			 $this->db->where($datewhere);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }	  
	  //create a list of admissions with an intradepartmental referral in ALL GM services
	  function a_get_refer_census($refer, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where($datewhere);
			 $this->db->where('dispo', $disp);
			 $this->db->like('refs', $refer);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->like('refs', $refer);
			 $this->db->where($datewhere);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }
	  //create list of admissions with extradepartmental referrals for one GM service
  	  function get_erefer_census($refer, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->where('service', $service);
			 $this->db->where($datewhere);
			 $this->db->like('erefs', $refer);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('service', $service);
			 $this->db->where('dispo', $disp);
			 $this->db->like('erefs', $refer);
			 $this->db->where($datewhere);
			 $this->db->order_by('type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }	  
	  //create list of admissions with extradepartmental referrals for ALL GM services
	  function a_get_erefer_census($refer, $disp, $service, $date1, $date2){
          		  
	  	  if (!strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
		  	 $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where($datewhere);
			 $this->db->where('dispo', $disp);
			 $this->db->like('erefs', $refer);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }  
		  if (strcmp($disp, "Admitted")){
		     $datewhere = array(
		  			   'date_out >=' => $date1,
					   'date_out <=' => $date2
					   );
		     $this->db->from('admissions');
			 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		     $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
			 $this->db->where('dispo', $disp);
			 $this->db->like('erefs', $refer);
			 $this->db->where($datewhere);
			 $this->db->order_by('service asc, type desc, location asc');
			 $query = $this->db->get();
			 return $query->result();
		  }
		  
	  }
	  //get admissions of patients   
	  function get_patients_adm($p_id){
	      $pname = $this->input->post('pname', TRUE);
	      $census = array( 
                                                   's'=>'',
		  		                   'p'=>$pname,
		  		  		   'bypatient'=>'y',
						   );
		  $this->session->set_userdata($census);	
          $this->db->from('patients');
		  $this->db->join('admissions', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
		  $this->db->where('patients.p_id', $p_id);
		  $this->db->order_by('date_in desc, dispo asc');
		  $query = $this->db->get();
          return $query->result(); 
	  }	
	  //get admissions of a jresident by id  
	  function get_jresidents_adm($r_id){
	      $r_id = $this->input->post('eresident'); 
		  $rname = $this->input->post('rname'); 
	      $census = array( 
		  		  		   's'=>'',
                                                   'r'=>$rname,
		    	  		           'c'=>'No',
						   'byresident'=>'y',
						   );
		  $this->session->set_userdata($census);	
	      $this->db->from('residents');
		  $this->db->join('admissions', 'residents.r_id = admissions.r_id', 'inner');
		  $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->where('residents.r_id', $r_id);
		  $this->db->order_by('date_in desc, dispo asc');
		  $query = $this->db->get();
          return $query->result(); 
	  }	  
	  //get admissions of an sresident by id
	  function get_sresidents_adm($r_id){
	      $r_id = $this->input->post('eresident'); 
		  $rname = $this->input->post('rname'); 
	      $census = array( 
		  		  		   's'=>'',
                                                   'r'=>$rname,
		    	  		           'c'=>'No',
						   'byresident'=>'y',
						   );
		  $this->session->set_userdata($census);	
	      $this->db->from('residents');
		  $this->db->join('admissions', 'residents.r_id = admissions.sr_id', 'inner');
		  $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		  $this->db->where('residents.r_id', $r_id);
		  $this->db->order_by('date_in desc, dispo asc');
		  $query = $this->db->get();
          return $query->result(); 
	  }	
	  //get admission details for display
	  function get_admission_data($aid){
		 $this->db->from('admissions');
		 $this->db->join('patients', 'patients.p_id = admissions.p_id', 'inner');
		 $this->db->join('residents', 'residents.r_id = admissions.r_id', 'inner');
		 $this->db->where('admissions.a_id', $aid);
		 $query = $this->db->get();
		 return $query->result();
	 }
 	 function get_admission_for_backup($id){
		 $this->db->from('admissions');
		 $this->db->where('admissions.a_id', $id);
		 $query = $this->db->get();
		 return $query->result();
	 }	  
	  
	  
	  //update one admission
	  function edit_one_admission($id){
	      $refs = $this->input->post('refs', TRUE);
		  $erefs = $this->input->post('erefs', TRUE);
		  $pcpdx = $this->input->post('pcpdx', TRUE);
	      if (is_array($refs))
	           $cs_refs = implode(",", $refs);
		  else
		  	   $cs_refs = "none";	
		  if (is_array($erefs))
	           $cs_erefs = implode(",", $erefs);
		  else
		  	   $cs_erefs = "none";
			   
		  if (is_array($pcpdx))
	           $cs_pcpdx = implode(",", $pcpdx);
		  else
		  	   $cs_pcpdx = "none";	
                  
                  $this->sr_id = $this->input->post('sr_id', TRUE);
		  $this->p_id = $this->input->post('p_id', TRUE);
		  $this->r_id = $this->input->post('r_id', TRUE);
                  $this->sic = $this->input->post('sic', TRUE);
		  $this->date_in = $this->input->post('date_in', TRUE);
		  $this->date_out = $this->input->post('date_out', TRUE);
		  $this->dispo = $this->input->post('dispo', TRUE);
		  $this->type = $this->input->post('type', TRUE);
		  $this->service = $this->input->post('service', TRUE);		 
	          $this->location = $this->input->post('location', TRUE);
		  $this->bed = $this->input->post('bed', TRUE);
		  $this->plist = $this->input->post('plist', TRUE);
		  $this->meds = $this->input->post('meds', TRUE);
		  $this->source = $this->input->post('source', TRUE);
		  $this->refs = $cs_refs;
		  $this->erefs = $cs_erefs;
		  $this->notes = $this->input->post('pnotes', TRUE)."\n".$this->input->post('notes', TRUE);
		  $this->pcpdx = $cs_pcpdx;	  
		  $this->abstract = $this->input->post('abstract', TRUE);
		  $this->dsummary = $this->input->post('dsummary', TRUE);
		  $this->sagip = $this->input->post('sagip', TRUE);
		  $this->home = $this->input->post('home', TRUE);
		  $this->cbc = $this->input->post('cbc', TRUE);			
                  $this->bloodchem = $this->input->post('bloodchem', TRUE);
		  $this->protime = $this->input->post('protime', TRUE);
		  $this->urine = $this->input->post('urine', TRUE);
		  $this->abg = $this->input->post('abg', TRUE);
		  $this->fecalysis = $this->input->post('fecalysis', TRUE);
		  $this->uchem = $this->input->post('uchem', TRUE);
		  $this->culture = $this->input->post('culture', TRUE);
		  $this->imaging = $this->input->post('imaging', TRUE);
		  $this->ecg = $this->input->post('ecg', TRUE);
		  $this->others = $this->input->post('others', TRUE);
		  $this->c_notes = $this->input->post('c_notes', TRUE);
		  $this->db->where('a_id', $id);
		  $query = $this->db->update('admissions',$this);
		  if (!strcmp($this->dispo, "Admitted"))
		      $adm_status = "Admitted";
		  else
		      $adm_status = "Not Admitted";	  
		  $this->Patient_model->update_adm_status($this->p_id, $adm_status);
		  $this->Patient_model->update_one_plist($this->p_id, $this->plist); 
                  //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit ward admission id#".$id.", patient#:".$this->p_id.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);  						  
	  }
	  
	 //delete an admission
	  function delete_one_admission($a_id){
                  $this->db->where('a_id', $a_id);
		  $query = $this->db->delete('admissions'); 
                  $adm_status = "Not Admitted";	  
	          $this->Patient_model->update_adm_status($this->input->post('p_id', TRUE), $adm_status);
                  //log delete task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: delete ward admission id#".$a_id."\r\n"; 
                     fwrite($handle, $data);  
                  return true; 
	  }	  	   	  
	  //insert
	  //insert new admission
	  function insert_one_admission(){  
	        	$this->p_id = $this->input->post('p_id',TRUE);
	        	$this->Patient_model->update_adm_status($this->p_id, "Admitted"); 
                        /*leave off pod for ER
			//$this->pod_id = $this->input->post('pod_id', TRUE);
                        */
	        	$this->sr_id = $this->input->post('sr_id', TRUE);
			$this->r_id = $this->input->post('r_id', TRUE);
                        $this->sic = $this->input->post('sic', TRUE);
			$this->date_in = $this->input->post('date_in',TRUE);
		  	$this->date_out = $this->input->post('date_out',TRUE);
		  	$this->dispo = $this->input->post('dispo', TRUE);
			$this->service = $this->input->post('service', TRUE);
			$this->type = $this->input->post('type',TRUE);
		  	$this->plist = $this->input->post('plist',TRUE);
			$this->Patient_model->update_one_plist($this->p_id, $this->plist);
		  	$this->meds = $this->input->post('meds',TRUE);
		  	$this->location = $this->input->post('location',TRUE);
		  	$this->bed = $this->input->post('bed',TRUE);
		  	$this->source = $this->input->post('source',TRUE);
			$this->notes = $this->input->post('notes', TRUE);
			$this->pcpdx = $this->input->post('pcpdx', TRUE);
                        /*
                        $this->abstract = $this->input->post('abstract', TRUE);
                        $this->dsummary = $this->input->post('dsummary', TRUE); 
                        $this->sagip = $this->input->post('sagip', TRUE);
                        $this->home = $this->input->post('home', TRUE);
			$this->cbc = $this->input->post('cbc', TRUE);
            	        $this->bloodchem = $this->input->post('bloodchem', TRUE);
		        $this->protime = $this->input->post('protime', TRUE);
			*/
			$unrefs = $this->input->post('refs', TRUE);
			$unerefs = $this->input->post('erefs', TRUE);
			$this->refs = implode(",", $unrefs);
			$this->erefs = implode(",", $unerefs);
		        $query = $this->db->insert('admissions', $this);
                        $id = $this->db->insert_id();
                   	//log insert task in text file
                        $file = "ward_admission_log.txt"; 
                        $handle = fopen($file, 'a');
                        date_default_timezone_set('Asia/Hong_Kong');
                        $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: insert ward admission id#".$id."\r\n"; 
                        fwrite($handle, $data);  	
		        return $id;
								  
	  }  

	  function insert_one_admission_bu(){
	      $admission_bu = array(
		  				'ab_id'=>$this->input->post('a_id'),
						'date_in'=>$this->input->post('date_in'),
						'date_out'=>$this->input->post('date_out'),
						'location'=>$this->input->post('location'),
						'bed'=>$this->input->post('bed'),
						'service'=>$this->input->post('service'),
						'type'=>$this->input->post('type'),
						'dispo'=>$this->input->post('dispo'),
                                                /*leave off POD for ER
						//'pod_id'=>$this->input->post('pod_id'),
                                                */
                                                'sr_id'=>$this->input->post('sr_id'),
						'p_id'=>$this->input->post('p_id'),
						'r_id'=>$this->input->post('r_id'),
                                                'sic'=>$this->input->post('sic'),
						'plist'=>$this->input->post('plist'),
						'meds'=>$this->input->post('meds'),
						'source'=>$this->input->post('source'),
						'refs'=>$this->input->post('refs'),
						'erefs'=>$this->input->post('erefs'),
						'notes'=>$this->input->post('notes'),
						'pcpdx'=>$this->input->post('pcpdx'),
                                                'abstract'=>$this->input->post('abstract'),
                                                'dsummary'=>$this->input->post('dsummary'), 
                                                'sagip'=>$this->input->post('sagip'),
                                                'home'=>$this->input->post('home'),
					        'cbc'=>$this->input->post('cbc'),
                       				'bloodchem'=>$this->input->post('bloodchem'),
						'protime'=>$this->input->post('protime'), 
					 	'urine'=>$this->input->post('urine'),
						'abg'=>$this->input->post('abg'),
					        'fecalysis'=>$this->input->post('fecalysis'),
					 	'uchem'=>$this->input->post('uchem'),
						'culture'=>$this->input->post('culture'),
						'imaging'=>$this->input->post('imaging'),
						'ecg'=>$this->input->post('ecg'),
						'others'=>$this->input->post('others'),
					 	'c_notes'=>$this->input->post('c_notes'),
					        'cbc2'=>$this->input->post('cbc'),
                       				'bloodchem2'=>$this->input->post('bloodchem'),
						'protime2'=>$this->input->post('protime'), 
					 	'urine2'=>$this->input->post('urine'),
						'abg2'=>$this->input->post('abg'),
					        'fecalysis2'=>$this->input->post('fecalysis'),
					 	'uchem2'=>$this->input->post('uchem'),
						'culture2'=>$this->input->post('culture'),
						'imaging2'=>$this->input->post('imaging'),
						'ecg2'=>$this->input->post('ecg'),
						'others2'=>$this->input->post('others'),
			

						);
		  $query = $this->db->insert('admissions_bu', $admission_bu);	
                  //log backup delete task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: backup ward admission id#".$this->input->post('a_id', TRUE)."\r\n"; 
                     fwrite($handle, $data);  
		  return $this->db->insert_id();					  
	  }  
      function count_pcpdx($date1, $date2, $dx){
	         $datewhere = array(
		  			   'date_in >=' => $date1,
					   'date_in <=' => $date2
					   );
	         $this->db->from('admissions');
			 $this->db->where($datewhere);
			 $this->db->like('pcpdx', $dx);
	         $query = $this->db->get();
			 return $query->num_rows();
	  }	  
       function edit_pcpdx($aid){
		 $pcpdx = $this->input->post('pcpdx', TRUE);
		  if (is_array($pcpdx))
	           $cs_pcpdx = implode(",", $pcpdx);
		  else
		  	   $cs_pcpdx = "none";	
                  $data = array( 'pcpdx'=>$cs_pcpdx); 
      		  $this->db->where('a_id', $aid);
                  $this->db->update('admissions', $data);
                 //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit pcpdx id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);  	
       }  
       function edit_cnotes($aid){
		 $c_notes = clean_form_input($this->input->post('c_notes', TRUE));
		  
                  $data = array( 'c_notes'=>$c_notes); 
      		  $this->db->where('a_id', $aid);

                  $this->db->update('admissions', $data);
                 //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit cnotes id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);  	
       }  	

       function edit_abstract($aid){
                 $a_time = clean_form_input($this->input->post('a_time', TRUE));
                 $plname = clean_form_input($this->input->post('plname', TRUE));
                 $pfname = clean_form_input($this->input->post('pfname', TRUE));
                 $pmname = clean_form_input($this->input->post('pmname', TRUE));
                 $admdx = clean_form_input($this->input->post('admdx', TRUE));
                 $cc = clean_form_input($this->input->post('cc', TRUE));
                 $reason = clean_form_input($this->input->post('reason', TRUE));
                 $history = clean_form_input($this->input->post('history', TRUE));
                 $survey = clean_form_input($this->input->post('survey', TRUE));
                 $bp = clean_form_input($this->input->post('bp', TRUE));
                 $hr = clean_form_input($this->input->post('hr', TRUE));
                 $rr = clean_form_input($this->input->post('rr', TRUE));
                 $temp = clean_form_input($this->input->post('temp', TRUE));
                 $heente = clean_form_input($this->input->post('heente', TRUE));
                 $cheste = clean_form_input($this->input->post('cheste', TRUE));
                 $cvse = clean_form_input($this->input->post('cvse', TRUE));
                 $abdomene = clean_form_input($this->input->post('abdomene', TRUE));
                 $gue = clean_form_input($this->input->post('gue', TRUE));
                 $skine = clean_form_input($this->input->post('skine', TRUE));
                 $neuroe = clean_form_input($this->input->post('neuroe', TRUE));
                 $cwards = clean_form_input($this->input->post('cwards', TRUE));
                 $plabs = clean_form_input($this->input->post('plabs', TRUE));
                 $surgop = clean_form_input($this->input->post('surgop', TRUE));
                 $surgeon = clean_form_input($this->input->post('surgeon', TRUE));
                 $dateop = clean_form_input($this->input->post('dateop', TRUE));
                 $timeop = clean_form_input($this->input->post('timeop', TRUE));
                 $distime = clean_form_input($this->input->post('distime', TRUE));
                 $d_condition = clean_form_input($this->input->post('d_condition', TRUE));
                 $anestype = clean_form_input($this->input->post('anestype', TRUE));
                 $anes = clean_form_input($this->input->post('anes', TRUE));
		 $abstract = array(
			'a_time'=>$a_time,
                        'plname'=>$plname,
                        'pfname'=>$pfname,
                        'pmname'=>$pmname,
                        'admdx'=>$admdx,
                        'cc'=>$cc,
                        'reason'=>$reason,
                        'history'=>$history,
                        'survey'=>$survey,
                        'bp'=>$bp,
                        'hr'=>$hr,
                        'rr'=>$rr,
                        'temp'=>$temp,
                        'heente'=>$heente,
                        'cheste'=>$cheste,
                        'cvse'=>$cvse,
                        'abdomene'=>$abdomene,
                        'gue'=>$gue,
                        'skine'=>$skine,
                        'neuroe'=>$neuroe,
                        'cwards'=>$cwards,
                        'plabs'=>$plabs,
                        'surgop'=>$surgop,
                        'surgeon'=>$surgeon,
                        'dateop'=>$dateop,
                        'timeop'=>$timeop,
                        'distime'=>$distime,
                        'd_condition'=>$d_condition,
                        'anestype'=>$anestype,
                        'anes'=>$anes,
                 );
                 $cs_abstract = implode(",", $abstract);
                 $data = array(
                               'abstract'=>$cs_abstract
                 );
 		 $this->db->where('a_id', $aid);
                 $this->db->update('admissions', $data);
                 //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit abstract id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);  	


       }
       function edit_dsummary($aid){
            $plname = clean_form_input($this->input->post('plname', TRUE));
            $pfname = clean_form_input($this->input->post('pfname', TRUE));
            $pmname = clean_form_input($this->input->post('pmname', TRUE));
            $disdiagnosis = clean_form_input($this->input->post('disdiagnosis', TRUE));
            $xnum = clean_form_input($this->input->post('xnum', TRUE));
            $disdate = clean_form_input($this->input->post('disdate', TRUE));
            $hisnum = clean_form_input($this->input->post('hisnum', TRUE));
            $mailadd = clean_form_input($this->input->post('mailadd', TRUE));
            $ptelnum = clean_form_input($this->input->post('ptelnum', TRUE));
            $relative = clean_form_input($this->input->post('relative', TRUE));
            $reladd = clean_form_input($this->input->post('reladd', TRUE));
            $rtelnum = clean_form_input($this->input->post('rtelnum', TRUE));
            $dispe = clean_form_input($this->input->post('dispe', TRUE));
            $hgb = clean_form_input($this->input->post('hgb', TRUE));
            $hct = clean_form_input($this->input->post('hct', TRUE));
            $btype = clean_form_input($this->input->post('btype', TRUE));
            $wbc = clean_form_input($this->input->post('wbc', TRUE));
            $esr = clean_form_input($this->input->post('esr', TRUE));
            $aphos = clean_form_input($this->input->post('aphos', TRUE));
            $culture = clean_form_input($this->input->post('culture', TRUE));
            $xray = clean_form_input($this->input->post('xray', TRUE));
            $postop = clean_form_input($this->input->post('postop', TRUE));
            $or1 = clean_form_input($this->input->post('or1', TRUE));
            $surg1 = clean_form_input($this->input->post('surg1', TRUE));
            $ordate1 = clean_form_input($this->input->post('ordate1', TRUE));
            $or2 = clean_form_input($this->input->post('or2', TRUE));
            $surg2 = clean_form_input($this->input->post('surg2', TRUE));
            $ordate2 = clean_form_input($this->input->post('ordate2', TRUE));
            $or3 = clean_form_input($this->input->post('or3', TRUE));
            $surg3 = clean_form_input($this->input->post('surg3', TRUE));
            $ordate3 = clean_form_input($this->input->post('ordate3', TRUE));
            $or4 = clean_form_input($this->input->post('or4', TRUE));
            $surg4 = clean_form_input($this->input->post('surg4', TRUE));
            $ordate4 = clean_form_input($this->input->post('ordate4', TRUE));
            $or5 = clean_form_input($this->input->post('or5', TRUE));
            $surg5 = clean_form_input($this->input->post('surg5', TRUE));
            $ordate5 = clean_form_input($this->input->post('ordate5', TRUE));
            $orfind = clean_form_input($this->input->post('orfind', TRUE));
            $cwards = clean_form_input($this->input->post('cwards', TRUE));
            $morbid = clean_form_input($this->input->post('morbid', TRUE));
            $mspecify = clean_form_input($this->input->post('mspecify', TRUE));
            $displans = clean_form_input($this->input->post('displans', TRUE));
            $prepby = clean_form_input($this->input->post('prepby', TRUE));
            $ric = clean_form_input($this->input->post('ric', TRUE));

            $dsummary = array(
                               'plname'=>$plname, 
            			'pfname'=>$pfname,
           			'pmname'=>$pmname,
            			'disdiagnosis'=>$disdiagnosis, 
            			'xnum'=>$xnum,
            			'disdate'=>$disdate,
            			'hisnum'=>$hisnum,
            			'mailadd'=>$mailadd,
            			'ptelnum'=>$ptelnum,
            			'relative'=>$relative,
                                'reladd'=>$reladd,
            			'rtelnum'=>$rtelnum,
            			'dispe'=>$dispe,
            			'hgb'=>	$hgb,
            			'hct'=>	$hct,
            			'btype'=>$btype,
            			'wbc'=>	$wbc,
            			'esr'=>	$esr,
            			'aphos'=>$aphos,
            			'culture'=>$culture,
            			'xray'=>$xray,
            			'postop'=>$postop,
            			'or1'=>	$or1,
            			'surg1'=>$surg1,
            			'ordate1'=>$ordate1,
            			'or2'=>	$or2,
            			'surg2'=>$surg2,
           			'ordate2'=>$ordate2,
            			'or3'=>	$or3,
            			'surg3'=>$surg3,
            			'ordate3'=>$ordate3,
            			'or4'=>	$or4,
            			'surg4'=>$surg4,
            			'ordate4'=>$ordate4,
            			'or5'=>	$or5,
            			'surg5'=>$surg5,
            			'ordate5'=>$ordate5,
            			'orfind'=>$orfind,
            			'cwards'=>$cwards,
            			'morbid'=>$morbid,
            			'mspecify'=>$mspecify,
            			'displans'=>$displans,
            			'prepby'=>$prepby,
            			'ric'=>	$ric,
                      );

                 $cs_dsummary = implode(",", $dsummary);
                 $data = array(
                               'dsummary'=>$cs_dsummary
                 );
 		 $this->db->where('a_id', $aid);
                 $this->db->update('admissions', $data);
                 //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit dsummary id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);  	


       }
       function edit_sagip($aid)
       {
            $occupation = clean_form_input($this->input->post('occupation', TRUE));   
            $mss = clean_form_input($this->input->post('mss', TRUE)); 
	    $housepip = clean_form_input($this->input->post('housepip', TRUE));
            $housedep = clean_form_input($this->input->post('housedep', TRUE));
            $req1 = clean_form_input($this->input->post('req1', TRUE));
            $cost1 = clean_form_input($this->input->post('cost1', TRUE));
            $numitem1 = clean_form_input($this->input->post('numitem1', TRUE));
            $req2 = clean_form_input($this->input->post('req2', TRUE));
            $cost2 = clean_form_input($this->input->post('cost2', TRUE));
            $numitem2 = clean_form_input($this->input->post('numitem2', TRUE));
            $req3 = clean_form_input($this->input->post('req3', TRUE));
            $cost3 = clean_form_input($this->input->post('cost3', TRUE));
            $numitem3 = clean_form_input($this->input->post('numitem3', TRUE));
            $req4 = clean_form_input($this->input->post('req4', TRUE));
            $cost4 = clean_form_input($this->input->post('cost4', TRUE));
            $numitem4 = clean_form_input($this->input->post('numitem4', TRUE));
        
            $sagip = array(
                           'occupation'=>$occupation,
                           'mss'=>$mss,
                           'housepip'=>$housepip,
                           'housedep'=>$housedep,
                           'req1'=>$req1,
                           'cost1'=>$cost1,
                           'numitem1'=>$numitem1,
                           'req2'=>$req2,
                           'cost2'=>$cost2,
                           'numitem2'=>$numitem2,
                           'req3'=>$req3,
                           'cost3'=>$cost3,
                           'numitem3'=>$numitem3,
                           'req4'=>$req4,
                           'cost4'=>$cost4,
                           'numitem4'=>$numitem4,
                     );
              $cs_sagip = implode(",", $sagip);
                 $data = array(
                               'sagip'=>$cs_sagip
                 );
              $this->db->where('a_id', $aid);
              $this->db->update('admissions', $data);
             //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit sagip id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);                
       
       }
       function edit_home($aid)
       {
        $out_date = clean_form_input($this->input->post('out_date', TRUE));
        $med1 = clean_form_input($this->input->post('med1', TRUE));
        $a6am = clean_form_input($this->input->post('a6am', TRUE));
        $a8am = clean_form_input($this->input->post('a8am', TRUE));
        $a1pm = clean_form_input($this->input->post('a1pm', TRUE));
	$a6pm = clean_form_input($this->input->post('a6pm', TRUE));
	$a8pm = clean_form_input($this->input->post('a8pm', TRUE));
	$a10pm = clean_form_input($this->input->post('a10pm', TRUE));
	$long1 = clean_form_input($this->input->post('long1', TRUE));    
	$med2 = clean_form_input($this->input->post('med2', TRUE));
        $b6am = clean_form_input($this->input->post('b6am', TRUE));
        $b8am = clean_form_input($this->input->post('b8am', TRUE));
        $b1pm = clean_form_input($this->input->post('b1pm', TRUE));
	$b6pm = clean_form_input($this->input->post('b6pm', TRUE));
	$b8pm = clean_form_input($this->input->post('b8pm', TRUE));
	$b10pm = clean_form_input($this->input->post('b10pm', TRUE));
	$long2= clean_form_input($this->input->post('long2', TRUE));    
	$med3 = clean_form_input($this->input->post('med3', TRUE));
        $c6am = clean_form_input($this->input->post('c6am', TRUE));
        $c8am = clean_form_input($this->input->post('c8am', TRUE));
        $c1pm = clean_form_input($this->input->post('c1pm', TRUE));
	$c6pm = clean_form_input($this->input->post('c6pm', TRUE));
	$c8pm = clean_form_input($this->input->post('c8pm', TRUE));
	$c10pm = clean_form_input($this->input->post('c10pm', TRUE));
	$long3= clean_form_input($this->input->post('long3', TRUE));    
	$med4 = clean_form_input($this->input->post('med4', TRUE));
        $d6am = clean_form_input($this->input->post('d6am', TRUE));
        $d8am = clean_form_input($this->input->post('d8am', TRUE));
        $d1pm = clean_form_input($this->input->post('d1pm', TRUE));
	$d6pm = clean_form_input($this->input->post('d6pm', TRUE));
	$d8pm = clean_form_input($this->input->post('d8pm', TRUE));
	$d10pm = clean_form_input($this->input->post('d10pm', TRUE));
	$long4= clean_form_input($this->input->post('long4', TRUE));    
	$med5 = clean_form_input($this->input->post('med5', TRUE));
        $e6am = clean_form_input($this->input->post('e6am', TRUE));
        $e8am = clean_form_input($this->input->post('e8am', TRUE));
        $e1pm = clean_form_input($this->input->post('e1pm', TRUE));
	$e6pm = clean_form_input($this->input->post('e6pm', TRUE));
	$e8pm = clean_form_input($this->input->post('e8pm', TRUE));
	$e10pm = clean_form_input($this->input->post('e10pm', TRUE));
	$long5= clean_form_input($this->input->post('long5', TRUE));    
	$med6 = clean_form_input($this->input->post('med6', TRUE));
        $f6am = clean_form_input($this->input->post('f6am', TRUE));
        $f8am = clean_form_input($this->input->post('f8am', TRUE));
        $f1pm = clean_form_input($this->input->post('f1pm', TRUE));
	$f6pm = clean_form_input($this->input->post('f6pm', TRUE));
	$f8pm = clean_form_input($this->input->post('f8pm', TRUE));
	$f10pm = clean_form_input($this->input->post('f10pm', TRUE));
	$long6= clean_form_input($this->input->post('long6', TRUE));    
	$med7 = clean_form_input($this->input->post('med7', TRUE));
        $g6am = clean_form_input($this->input->post('g6am', TRUE));
        $g8am = clean_form_input($this->input->post('g8am', TRUE));
        $g1pm = clean_form_input($this->input->post('g1pm', TRUE));
	$g6pm = clean_form_input($this->input->post('g6pm', TRUE));
	$g8pm = clean_form_input($this->input->post('g8pm', TRUE));
	$g10pm = clean_form_input($this->input->post('g10pm', TRUE));
	$long7= clean_form_input($this->input->post('long7', TRUE));    
	$med8 = clean_form_input($this->input->post('med8', TRUE));
        $h6am = clean_form_input($this->input->post('h6am', TRUE));
        $h8am = clean_form_input($this->input->post('h8am', TRUE));
        $h1pm = clean_form_input($this->input->post('h1pm', TRUE));
	$h6pm = clean_form_input($this->input->post('h6pm', TRUE));
	$h8pm = clean_form_input($this->input->post('h8pm', TRUE));
	$h10pm = clean_form_input($this->input->post('h10pm', TRUE));
	$long8= clean_form_input($this->input->post('long8', TRUE));    
        
        $home = array(
		'out_date'=>$out_date,
		'med1'=>$med1,
		'a6am'=>$a6am,
		'a8am'=>$a8am,
		'a1pm'=>$a1pm,
		'a6pm'=>$a6pm,
		'a8pm'=>$a8pm,
		'a10pm'=>$a10pm,
		'long1'=>$long1,    
		'med2'=>$med2,
		'b6am'=>$b6am,
		'b8am'=>$b8am,
		'b1pm'=>$b1pm,
		'b6pm'=>$b6pm,
		'b8pm'=>$b8pm,
		'b10pm'=>$b10pm,
		'long2'=>$long2,    
		'med3'=>$med3,
		'c6am'=>$c6am,
		'c8am'=>$c8am,
		'c1pm'=>$c1pm,
		'c6pm'=>$c6pm,
		'c8pm'=>$c8pm,
		'c10pm'=>$c10pm,
		'long3'=>$long3,    
		'med4'=>$med4,
		'd6am'=>$d6am,
		'd8am'=>$d8am,
		'd1pm'=>$d1pm,
		'd6pm'=>$d6pm,
		'd8pm'=>$d8pm,
		'd10pm'=>$d10pm,
		'long4'=>$long4,    
		'med5'=>$med5,
		'e6am'=>$e6am,
		'e8am'=>$e8am,
		'e1pm'=>$e1pm,
		'e6pm'=>$e6pm,
		'e8pm'=>$e8pm,
		'e10pm'=>$e10pm,
		'long5'=>$long5,   
		'med6'=>$med6,
		'f6am'=>$f6am,
		'f8am'=>$f8am,
		'f1pm'=>$f1pm,
		'f6pm'=>$f6pm,
		'f8pm'=>$f8pm,
		'f10pm'=>$f10pm,
		'long6'=>$long6,   
		'med7'=>$med7,
		'g6am'=>$g6am,
		'g8am'=>$g8am,
		'g1pm'=>$g1pm,
		'g6pm'=>$g6pm,
		'g8pm'=>$g8pm,
		'g10pm'=>$g10pm,
		'long7'=>$long7,  
		'med8'=>$med8,
		'h6am'=>$h6am,
		'h8am'=>$h8am,
		'h1pm'=>$h1pm,
		'h6pm'=>$h6pm,
		'h8pm'=>$h8pm,
		'h10pm'=>$h10pm,
		'long8'=>$long8,    
        );    
	$cs_home = implode(",", $home);
                 $data = array(
                               'home'=>$cs_home
                 );
              $this->db->where('a_id', $aid);
              $this->db->update('admissions', $data);
             //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit home id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);                
        


       }
       function edit_cbc($aid)
       {
	$cbc = array(
                //col 1
        	'Date1' => clean_form_input($this->input->post('Date1', TRUE)),
		'Time1'=>clean_form_input($this->input->post('Time1', TRUE)),
		'WBC1' => clean_form_input($this->input->post('WBC1', TRUE)),
		'RBC1' => clean_form_input($this->input->post('RBC1', TRUE)),
		'Hgb1' => clean_form_input($this->input->post('Hgb1', TRUE)),
		'Hct1' => clean_form_input($this->input->post('Hct1', TRUE)),
		'MCV1' => clean_form_input($this->input->post('MCV1', TRUE)),
		'MCH1' => clean_form_input($this->input->post('MCH1', TRUE)),
		'MCHC1' => clean_form_input($this->input->post('MCHC1', TRUE)),
		'RDWCV1' => clean_form_input($this->input->post('RDWCV1', TRUE)),
 		'Platelets1' => clean_form_input($this->input->post('Platelets1', TRUE)),
		'Neut1' => clean_form_input($this->input->post('Neut1', TRUE)),
		'Lymph1' => clean_form_input($this->input->post('Lymph1', TRUE)),
		'Mono1' => clean_form_input($this->input->post('Mono1', TRUE)),
		'Eo1' => clean_form_input($this->input->post('Eo1', TRUE)),	
		'Baso1' => clean_form_input($this->input->post('Baso1', TRUE)),
		'Pro_Mye_Jv1' => clean_form_input($this->input->post('Pro_Mye_Jv1', TRUE)),
		'Stabs1' => clean_form_input($this->input->post('Stabs1', TRUE)),
		'Blasts1' => clean_form_input($this->input->post('Blasts1', TRUE)),
		'NRBC1' => clean_form_input($this->input->post('NRBC1', TRUE)),
                //col 2
		'Date2' => clean_form_input($this->input->post('Date2', TRUE)),
		'Time2'=>clean_form_input($this->input->post('Time2', TRUE)),
		'WBC2' => clean_form_input($this->input->post('WBC2', TRUE)),
		'RBC2' => clean_form_input($this->input->post('RBC2', TRUE)),
		'Hgb2' => clean_form_input($this->input->post('Hgb2', TRUE)),
		'Hct2' => clean_form_input($this->input->post('Hct2', TRUE)),
		'MCV2' => clean_form_input($this->input->post('MCV2', TRUE)),
		'MCH2' => clean_form_input($this->input->post('MCH2', TRUE)),
		'MCHC2' => clean_form_input($this->input->post('MCHC2', TRUE)),
		'RDWCV2' => clean_form_input($this->input->post('RDWCV2', TRUE)),
 		'Platelets2' => clean_form_input($this->input->post('Platelets2', TRUE)),
		'Neut2' => clean_form_input($this->input->post('Neut2', TRUE)),
		'Lymph2' => clean_form_input($this->input->post('Lymph2', TRUE)),
		'Mono2' => clean_form_input($this->input->post('Mono2', TRUE)),
		'Eo2' => clean_form_input($this->input->post('Eo2', TRUE)),	
		'Baso2' => clean_form_input($this->input->post('Baso2', TRUE)),
		'Pro_Mye_Jv2' => clean_form_input($this->input->post('Pro_Mye_Jv2', TRUE)),
		'Stabs2' => clean_form_input($this->input->post('Stabs2', TRUE)),
		'Blasts2' => clean_form_input($this->input->post('Blasts2', TRUE)),
		'NRBC2' => clean_form_input($this->input->post('NRBC2', TRUE)),
                //col 3
		'Date3' => clean_form_input($this->input->post('Date3', TRUE)),
		'Time3'=>clean_form_input($this->input->post('Time3', TRUE)),
		'WBC3' => clean_form_input($this->input->post('WBC3', TRUE)),
		'RBC3' => clean_form_input($this->input->post('RBC3', TRUE)),
		'Hgb3' => clean_form_input($this->input->post('Hgb3', TRUE)),
		'Hct3' => clean_form_input($this->input->post('Hct3', TRUE)),
		'MCV3' => clean_form_input($this->input->post('MCV3', TRUE)),
		'MCH3' => clean_form_input($this->input->post('MCH3', TRUE)),
		'MCHC3' => clean_form_input($this->input->post('MCHC3', TRUE)),
		'RDWCV3' => clean_form_input($this->input->post('RDWCV3', TRUE)),
 		'Platelets3' => clean_form_input($this->input->post('Platelets3', TRUE)),
		'Neut3' => clean_form_input($this->input->post('Neut3', TRUE)),
		'Lymph3' => clean_form_input($this->input->post('Lymph3', TRUE)),
		'Mono3' => clean_form_input($this->input->post('Mono3', TRUE)),
		'Eo3' => clean_form_input($this->input->post('Eo3', TRUE)),	
		'Baso3' => clean_form_input($this->input->post('Baso3', TRUE)),
		'Pro_Mye_Jv3' => clean_form_input($this->input->post('Pro_Mye_Jv3', TRUE)),
		'Stabs3' => clean_form_input($this->input->post('Stabs3', TRUE)),
		'Blasts3' => clean_form_input($this->input->post('Blasts3', TRUE)),
		'NRBC3' => clean_form_input($this->input->post('NRBC3', TRUE)),
		//col 4
		'Date4' => clean_form_input($this->input->post('Date4', TRUE)),
		'Time4'=>clean_form_input($this->input->post('Time4', TRUE)),
		'WBC4' => clean_form_input($this->input->post('WBC4', TRUE)),
		'RBC4' => clean_form_input($this->input->post('RBC4', TRUE)),
		'Hgb4' => clean_form_input($this->input->post('Hgb4', TRUE)),
		'Hct4' => clean_form_input($this->input->post('Hct4', TRUE)),
		'MCV4' => clean_form_input($this->input->post('MCV4', TRUE)),
		'MCH4' => clean_form_input($this->input->post('MCH4', TRUE)),
		'MCHC4' => clean_form_input($this->input->post('MCHC4', TRUE)),
		'RDWCV4' => clean_form_input($this->input->post('RDWCV4', TRUE)),
 		'Platelets4' => clean_form_input($this->input->post('Platelets4', TRUE)),
		'Neut4' => clean_form_input($this->input->post('Neut4', TRUE)),
		'Lymph4' => clean_form_input($this->input->post('Lymph4', TRUE)),
		'Mono4' => clean_form_input($this->input->post('Mono4', TRUE)),
		'Eo4' => clean_form_input($this->input->post('Eo4', TRUE)),	
		'Baso4' => clean_form_input($this->input->post('Baso4', TRUE)),
		'Pro_Mye_Jv4' => clean_form_input($this->input->post('Pro_Mye_Jv4', TRUE)),
		'Stabs4' => clean_form_input($this->input->post('Stabs4', TRUE)),
		'Blasts4' => clean_form_input($this->input->post('Blasts4', TRUE)),
		'NRBC4' => clean_form_input($this->input->post('NRBC4', TRUE)),
		//col 5
		'Date5' => clean_form_input($this->input->post('Date5', TRUE)),
		'Time5'=>clean_form_input($this->input->post('Time5', TRUE)),
		'WBC5' => clean_form_input($this->input->post('WBC5', TRUE)),
		'RBC5' => clean_form_input($this->input->post('RBC5', TRUE)),
		'Hgb5' => clean_form_input($this->input->post('Hgb5', TRUE)),
		'Hct5' => clean_form_input($this->input->post('Hct5', TRUE)),
		'MCV5' => clean_form_input($this->input->post('MCV5', TRUE)),
		'MCH5' => clean_form_input($this->input->post('MCH5', TRUE)),
		'MCHC5' => clean_form_input($this->input->post('MCHC5', TRUE)),
		'RDWCV5' => clean_form_input($this->input->post('RDWCV5', TRUE)),
 		'Platelets5' => clean_form_input($this->input->post('Platelets5', TRUE)),
		'Neut5' => clean_form_input($this->input->post('Neut5', TRUE)),
		'Lymph5' => clean_form_input($this->input->post('Lymph5', TRUE)),
		'Mono5' => clean_form_input($this->input->post('Mono5', TRUE)),
		'Eo5' => clean_form_input($this->input->post('Eo5', TRUE)),	
		'Baso5' => clean_form_input($this->input->post('Baso5', TRUE)),
		'Pro_Mye_Jv5' => clean_form_input($this->input->post('Pro_Mye_Jv5', TRUE)),
		'Stabs5' => clean_form_input($this->input->post('Stabs5', TRUE)),
		'Blasts5' => clean_form_input($this->input->post('Blasts5', TRUE)),
		'NRBC5' => clean_form_input($this->input->post('NRBC5', TRUE)),
		//col 6
		'Date6' => clean_form_input($this->input->post('Date6', TRUE)),
		'Time6'=>clean_form_input($this->input->post('Time6', TRUE)),
		'WBC6' => clean_form_input($this->input->post('WBC6', TRUE)),
		'RBC6' => clean_form_input($this->input->post('RBC6', TRUE)),
		'Hgb6' => clean_form_input($this->input->post('Hgb6', TRUE)),
		'Hct6' => clean_form_input($this->input->post('Hct6', TRUE)),
		'MCV6' => clean_form_input($this->input->post('MCV6', TRUE)),
		'MCH6' => clean_form_input($this->input->post('MCH6', TRUE)),
		'MCHC6' => clean_form_input($this->input->post('MCHC6', TRUE)),
		'RDWCV6' => clean_form_input($this->input->post('RDWCV6', TRUE)),
 		'Platelets6' => clean_form_input($this->input->post('Platelets6', TRUE)),
		'Neut6' => clean_form_input($this->input->post('Neut6', TRUE)),
		'Lymph6' => clean_form_input($this->input->post('Lymph6', TRUE)),
		'Mono6' => clean_form_input($this->input->post('Mono6', TRUE)),
		'Eo6' => clean_form_input($this->input->post('Eo6', TRUE)),	
		'Baso6' => clean_form_input($this->input->post('Baso6', TRUE)),
		'Pro_Mye_Jv6' => clean_form_input($this->input->post('Pro_Mye_Jv6', TRUE)),
		'Stabs6' => clean_form_input($this->input->post('Stabs6', TRUE)),
		'Blasts6' => clean_form_input($this->input->post('Blasts6', TRUE)),
		'NRBC6' => clean_form_input($this->input->post('NRBC6', TRUE)),
		//col 7
		'Date7' => clean_form_input($this->input->post('Date7', TRUE)),
		'Time7'=>clean_form_input($this->input->post('Time7', TRUE)),
		'WBC7' => clean_form_input($this->input->post('WBC7', TRUE)),
		'RBC7' => clean_form_input($this->input->post('RBC7', TRUE)),
		'Hgb7' => clean_form_input($this->input->post('Hgb7', TRUE)),
		'Hct7' => clean_form_input($this->input->post('Hct7', TRUE)),
		'MCV7' => clean_form_input($this->input->post('MCV7', TRUE)),
		'MCH7' => clean_form_input($this->input->post('MCH7', TRUE)),
		'MCHC7' => clean_form_input($this->input->post('MCHC7', TRUE)),
		'RDWCV7' => clean_form_input($this->input->post('RDWCV7', TRUE)),
 		'Platelets7' => clean_form_input($this->input->post('Platelets7', TRUE)),
		'Neut7' => clean_form_input($this->input->post('Neut7', TRUE)),
		'Lymph7' => clean_form_input($this->input->post('Lymph7', TRUE)),
		'Mono7' => clean_form_input($this->input->post('Mono7', TRUE)),
		'Eo7' => clean_form_input($this->input->post('Eo7', TRUE)),	
		'Baso7' => clean_form_input($this->input->post('Baso7', TRUE)),
		'Pro_Mye_Jv7' => clean_form_input($this->input->post('Pro_Mye_Jv7', TRUE)),
		'Stabs7' => clean_form_input($this->input->post('Stabs7', TRUE)),
		'Blasts7' => clean_form_input($this->input->post('Blasts7', TRUE)),
		'NRBC7' => clean_form_input($this->input->post('NRBC7', TRUE)),
		//col 8
		'Date8' => clean_form_input($this->input->post('Date8', TRUE)),
		'Time8'=>clean_form_input($this->input->post('Time8', TRUE)),
		'WBC8' => clean_form_input($this->input->post('WBC8', TRUE)),
		'RBC8' => clean_form_input($this->input->post('RBC8', TRUE)),
		'Hgb8' => clean_form_input($this->input->post('Hgb8', TRUE)),
		'Hct8' => clean_form_input($this->input->post('Hct8', TRUE)),
		'MCV8' => clean_form_input($this->input->post('MCV8', TRUE)),
		'MCH8' => clean_form_input($this->input->post('MCH8', TRUE)),
		'MCHC8' => clean_form_input($this->input->post('MCHC8', TRUE)),
		'RDWCV8' => clean_form_input($this->input->post('RDWCV8', TRUE)),
 		'Platelets8' => clean_form_input($this->input->post('Platelets8', TRUE)),
		'Neut8' => clean_form_input($this->input->post('Neut8', TRUE)),
		'Lymph8' => clean_form_input($this->input->post('Lymph8', TRUE)),
		'Mono8' => clean_form_input($this->input->post('Mono8', TRUE)),
		'Eo8' => clean_form_input($this->input->post('Eo8', TRUE)),	
		'Baso8' => clean_form_input($this->input->post('Baso8', TRUE)),
		'Pro_Mye_Jv8' => clean_form_input($this->input->post('Pro_Mye_Jv8', TRUE)),
		'Stabs8' => clean_form_input($this->input->post('Stabs8', TRUE)),
		'Blasts8' => clean_form_input($this->input->post('Blasts8', TRUE)),
		'NRBC8' => clean_form_input($this->input->post('NRBC8', TRUE)),
		//col 9
		'Date9' => clean_form_input($this->input->post('Date9', TRUE)),
		'Time9'=>clean_form_input($this->input->post('Time9', TRUE)),
		'WBC9' => clean_form_input($this->input->post('WBC9', TRUE)),
		'RBC9' => clean_form_input($this->input->post('RBC9', TRUE)),
		'Hgb9' => clean_form_input($this->input->post('Hgb9', TRUE)),
		'Hct9' => clean_form_input($this->input->post('Hct9', TRUE)),
		'MCV9' => clean_form_input($this->input->post('MCV9', TRUE)),
		'MCH9' => clean_form_input($this->input->post('MCH9', TRUE)),
		'MCHC9' => clean_form_input($this->input->post('MCHC9', TRUE)),
		'RDWCV9' => clean_form_input($this->input->post('RDWCV9', TRUE)),
 		'Platelets9' => clean_form_input($this->input->post('Platelets9', TRUE)),
		'Neut9' => clean_form_input($this->input->post('Neut9', TRUE)),
		'Lymph9' => clean_form_input($this->input->post('Lymph9', TRUE)),
		'Mono9' => clean_form_input($this->input->post('Mono9', TRUE)),
		'Eo9' => clean_form_input($this->input->post('Eo9', TRUE)),	
		'Baso9' => clean_form_input($this->input->post('Baso9', TRUE)),
		'Pro_Mye_Jv9' => clean_form_input($this->input->post('Pro_Mye_Jv9', TRUE)),
		'Stabs9' => clean_form_input($this->input->post('Stabs9', TRUE)),
		'Blasts9' => clean_form_input($this->input->post('Blasts9', TRUE)),
		'NRBC9' => clean_form_input($this->input->post('NRBC9', TRUE)),
        	//col 10
		'Date10' => clean_form_input($this->input->post('Date10', TRUE)),
		'Time10'=>clean_form_input($this->input->post('Time10', TRUE)),
		'WBC10' => clean_form_input($this->input->post('WBC10', TRUE)),
		'RBC10' => clean_form_input($this->input->post('RBC10', TRUE)),
		'Hgb10' => clean_form_input($this->input->post('Hgb10', TRUE)),
		'Hct10' => clean_form_input($this->input->post('Hct10', TRUE)),
		'MCV10' => clean_form_input($this->input->post('MCV10', TRUE)),
		'MCH10' => clean_form_input($this->input->post('MCH10', TRUE)),
		'MCHC10' => clean_form_input($this->input->post('MCHC10', TRUE)),
		'RDWCV10' => clean_form_input($this->input->post('RDWCV10', TRUE)),
 		'Platelets10' => clean_form_input($this->input->post('Platelets10', TRUE)),
		'Neut10' => clean_form_input($this->input->post('Neut10', TRUE)),
		'Lymph10' => clean_form_input($this->input->post('Lymph10', TRUE)),
		'Mono10' => clean_form_input($this->input->post('Mono10', TRUE)),
		'Eo10' => clean_form_input($this->input->post('Eo10', TRUE)),	
		'Baso10' => clean_form_input($this->input->post('Baso10', TRUE)),
		'Pro_Mye_Jv10' => clean_form_input($this->input->post('Pro_Mye_Jv10', TRUE)),
		'Stabs10' => clean_form_input($this->input->post('Stabs10', TRUE)),
		'Blasts10' => clean_form_input($this->input->post('Blasts10', TRUE)),
		'NRBC10' => clean_form_input($this->input->post('NRBC10', TRUE)),
		//col 11
		'Date11' => clean_form_input($this->input->post('Date11', TRUE)),
		'Time11'=>clean_form_input($this->input->post('Time11', TRUE)),
		'WBC11' => clean_form_input($this->input->post('WBC11', TRUE)),
		'RBC11' => clean_form_input($this->input->post('RBC11', TRUE)),
		'Hgb11' => clean_form_input($this->input->post('Hgb11', TRUE)),
		'Hct11' => clean_form_input($this->input->post('Hct11', TRUE)),
		'MCV11' => clean_form_input($this->input->post('MCV11', TRUE)),
		'MCH11' => clean_form_input($this->input->post('MCH11', TRUE)),
		'MCHC11' => clean_form_input($this->input->post('MCHC11', TRUE)),
		'RDWCV11' => clean_form_input($this->input->post('RDWCV11', TRUE)),
 		'Platelets11' => clean_form_input($this->input->post('Platelets11', TRUE)),
		'Neut11' => clean_form_input($this->input->post('Neut11', TRUE)),
		'Lymph11' => clean_form_input($this->input->post('Lymph11', TRUE)),
		'Mono11' => clean_form_input($this->input->post('Mono11', TRUE)),
		'Eo11' => clean_form_input($this->input->post('Eo11', TRUE)),	
		'Baso11' => clean_form_input($this->input->post('Baso11', TRUE)),
		'Pro_Mye_Jv11' => clean_form_input($this->input->post('Pro_Mye_Jv11', TRUE)),
		'Stabs11' => clean_form_input($this->input->post('Stabs11', TRUE)),
		'Blasts11' => clean_form_input($this->input->post('Blasts11', TRUE)),
		'NRBC11' => clean_form_input($this->input->post('NRBC11', TRUE)),
		//col 12
		'Date12' => clean_form_input($this->input->post('Date12', TRUE)),
		'Time12'=>clean_form_input($this->input->post('Time12', TRUE)),
		'WBC12' => clean_form_input($this->input->post('WBC12', TRUE)),
		'RBC12' => clean_form_input($this->input->post('RBC12', TRUE)),
		'Hgb12' => clean_form_input($this->input->post('Hgb12', TRUE)),
		'Hct12' => clean_form_input($this->input->post('Hct12', TRUE)),
		'MCV12' => clean_form_input($this->input->post('MCV12', TRUE)),
		'MCH12' => clean_form_input($this->input->post('MCH12', TRUE)),
		'MCHC12' => clean_form_input($this->input->post('MCHC12', TRUE)),
		'RDWCV12' => clean_form_input($this->input->post('RDWCV12', TRUE)),
 		'Platelets12' => clean_form_input($this->input->post('Platelets12', TRUE)),
		'Neut12' => clean_form_input($this->input->post('Neut12', TRUE)),
		'Lymph12' => clean_form_input($this->input->post('Lymph12', TRUE)),
		'Mono12' => clean_form_input($this->input->post('Mono12', TRUE)),
		'Eo12' => clean_form_input($this->input->post('Eo12', TRUE)),	
		'Baso12' => clean_form_input($this->input->post('Baso12', TRUE)),
		'Pro_Mye_Jv12' => clean_form_input($this->input->post('Pro_Mye_Jv12', TRUE)),
		'Stabs12' => clean_form_input($this->input->post('Stabs12', TRUE)),
		'Blasts12' => clean_form_input($this->input->post('Blasts12', TRUE)),
		'NRBC12' => clean_form_input($this->input->post('NRBC12', TRUE)),
		//col 13
		'Date13' => clean_form_input($this->input->post('Date13', TRUE)),
		'Time13'=>clean_form_input($this->input->post('Time13', TRUE)),
		'WBC13' => clean_form_input($this->input->post('WBC13', TRUE)),
		'RBC13' => clean_form_input($this->input->post('RBC13', TRUE)),
		'Hgb13' => clean_form_input($this->input->post('Hgb13', TRUE)),
		'Hct13' => clean_form_input($this->input->post('Hct13', TRUE)),
		'MCV13' => clean_form_input($this->input->post('MCV13', TRUE)),
		'MCH13' => clean_form_input($this->input->post('MCH13', TRUE)),
		'MCHC13' => clean_form_input($this->input->post('MCHC13', TRUE)),
		'RDWCV13' => clean_form_input($this->input->post('RDWCV13', TRUE)),
 		'Platelets13' => clean_form_input($this->input->post('Platelets13', TRUE)),
		'Neut13' => clean_form_input($this->input->post('Neut13', TRUE)),
		'Lymph13' => clean_form_input($this->input->post('Lymph13', TRUE)),
		'Mono13' => clean_form_input($this->input->post('Mono13', TRUE)),
		'Eo13' => clean_form_input($this->input->post('Eo13', TRUE)),	
		'Baso13' => clean_form_input($this->input->post('Baso13', TRUE)),
		'Pro_Mye_Jv13' => clean_form_input($this->input->post('Pro_Mye_Jv13', TRUE)),
		'Stabs13' => clean_form_input($this->input->post('Stabs13', TRUE)),
		'Blasts13' => clean_form_input($this->input->post('Blasts13', TRUE)),
		'NRBC13' => clean_form_input($this->input->post('NRBC13', TRUE)),
		//col 14
		'Date14' => clean_form_input($this->input->post('Date14', TRUE)),
		'Time14'=>clean_form_input($this->input->post('Time14', TRUE)),
		'WBC14' => clean_form_input($this->input->post('WBC14', TRUE)),
		'RBC14' => clean_form_input($this->input->post('RBC14', TRUE)),
		'Hgb14' => clean_form_input($this->input->post('Hgb14', TRUE)),
		'Hct14' => clean_form_input($this->input->post('Hct14', TRUE)),
		'MCV14' => clean_form_input($this->input->post('MCV14', TRUE)),
		'MCH14' => clean_form_input($this->input->post('MCH14', TRUE)),
		'MCHC14' => clean_form_input($this->input->post('MCHC14', TRUE)),
		'RDWCV14' => clean_form_input($this->input->post('RDWCV14', TRUE)),
 		'Platelets14' => clean_form_input($this->input->post('Platelets14', TRUE)),
		'Neut14' => clean_form_input($this->input->post('Neut14', TRUE)),
		'Lymph14' => clean_form_input($this->input->post('Lymph14', TRUE)),
		'Mono14' => clean_form_input($this->input->post('Mono14', TRUE)),
		'Eo14' => clean_form_input($this->input->post('Eo14', TRUE)),	
		'Baso14' => clean_form_input($this->input->post('Baso14', TRUE)),
		'Pro_Mye_Jv14' => clean_form_input($this->input->post('Pro_Mye_Jv14', TRUE)),
		'Stabs14' => clean_form_input($this->input->post('Stabs14', TRUE)),
		'Blasts14' => clean_form_input($this->input->post('Blasts14', TRUE)),
		'NRBC14' => clean_form_input($this->input->post('NRBC14', TRUE)),
		//col 15
		'Date15' => clean_form_input($this->input->post('Date15', TRUE)),
		'Time15'=>clean_form_input($this->input->post('Time15', TRUE)),
		'WBC15' => clean_form_input($this->input->post('WBC15', TRUE)),
		'RBC15' => clean_form_input($this->input->post('RBC15', TRUE)),
		'Hgb15' => clean_form_input($this->input->post('Hgb15', TRUE)),
		'Hct15' => clean_form_input($this->input->post('Hct15', TRUE)),
		'MCV15' => clean_form_input($this->input->post('MCV15', TRUE)),
		'MCH15' => clean_form_input($this->input->post('MCH15', TRUE)),
		'MCHC15' => clean_form_input($this->input->post('MCHC15', TRUE)),
		'RDWCV15' => clean_form_input($this->input->post('RDWCV15', TRUE)),
 		'Platelets15' => clean_form_input($this->input->post('Platelets15', TRUE)),
		'Neut15' => clean_form_input($this->input->post('Neut15', TRUE)),
		'Lymph15' => clean_form_input($this->input->post('Lymph15', TRUE)),
		'Mono15' => clean_form_input($this->input->post('Mono15', TRUE)),
		'Eo15' => clean_form_input($this->input->post('Eo15', TRUE)),	
		'Baso15' => clean_form_input($this->input->post('Baso15', TRUE)),
		'Pro_Mye_Jv15' => clean_form_input($this->input->post('Pro_Mye_Jv15', TRUE)),
		'Stabs15' => clean_form_input($this->input->post('Stabs15', TRUE)),
		'Blasts15' => clean_form_input($this->input->post('Blasts15', TRUE)),
		'NRBC15' => clean_form_input($this->input->post('NRBC15', TRUE)),
		);
		$cs_cbc = implode(",", $cbc);
                 $data = array(
                               'cbc'=>$cs_cbc
                 );
              $this->db->where('a_id', $aid);
              $this->db->update('admissions', $data);
             //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit cbc id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);                

       }
       function edit_bloodchem($aid)
       {
	$bloodchem = array(
                //col 1
                'Date1'=> clean_form_input($this->input->post('Date1', TRUE)),
		'Time1'=> clean_form_input($this->input->post('Time1', TRUE)),
		'Glucose1'=> clean_form_input($this->input->post('Glucose1', TRUE)),
		'BUN1'=> clean_form_input($this->input->post('BUN1', TRUE)),
		'Creatinine1'=> clean_form_input($this->input->post('Creatinine1', TRUE)),
		'Sodium1'=> clean_form_input($this->input->post('Sodium1', TRUE)),
		'Potassium1'=> clean_form_input($this->input->post('Potassium1', TRUE)),
		'Chloride1'=> clean_form_input($this->input->post('Chloride1', TRUE)),
		'Calcium1'=> clean_form_input($this->input->post('Calcium1', TRUE)),
		'Magnesium1'=> clean_form_input($this->input->post('Magnesium1', TRUE)),
 		'Phosphorus1'=> clean_form_input($this->input->post('Phosphorus1', TRUE)),
		'Total_Protein1'=> clean_form_input($this->input->post('Total_Protein1', TRUE)),
		'Albumin1'=> clean_form_input($this->input->post('Albumin1', TRUE)),
		'Globulin1'=> clean_form_input($this->input->post('Globulin1', TRUE)),
		'AST_SGOT1'=> clean_form_input($this->input->post('AST_SGOT1', TRUE)),
		'ALT_SGPT1'=> clean_form_input($this->input->post('ALT_SGPT1', TRUE)),
		'Alk_Phos1'=> clean_form_input($this->input->post('Alk_Phos1', TRUE)),
		'Total_Bilirubin1'=> clean_form_input($this->input->post('Total_Bilirubin1', TRUE)),
		'Direct_Bilirubin1'=> clean_form_input($this->input->post('Direct_Bilirubin1', TRUE)),
		'Indirect_Bilirubin1'=> clean_form_input($this->input->post('Indirect_Bilirubin1', TRUE)),
                'HDL1'=> clean_form_input($this->input->post('HDL1', TRUE)),
		'LDL1'=> clean_form_input($this->input->post('LDL1', TRUE)),
		'Cholesterol1'=> clean_form_input($this->input->post('Cholesterol1', TRUE)),
		'Triglycerides1'=> clean_form_input($this->input->post('Triglycerides1', TRUE)),
		'Uric_Acid1'=> clean_form_input($this->input->post('Uric_Acid1', TRUE)),
		'Amylase1'=> clean_form_input($this->input->post('Amylase1', TRUE)),
                'Lipase1'=> clean_form_input($this->input->post('Lipase1', TRUE)),
		'CK_Total1'=> clean_form_input($this->input->post('CK_Total1', TRUE)),
		'CK_MB1'=> clean_form_input($this->input->post('CK_MB1', TRUE)),
		'CK_MM1'=> clean_form_input($this->input->post('CK_MM1', TRUE)),
		'Trop_I1'=> clean_form_input($this->input->post('Trop_I1', TRUE)),
                'Myoglobin1'=> clean_form_input($this->input->post('Myoglobin1', TRUE)),

                //col 2
                'Date2'=> clean_form_input($this->input->post('Date2', TRUE)),
		'Time2'=> clean_form_input($this->input->post('Time2', TRUE)),
		'Glucose2'=> clean_form_input($this->input->post('Glucose2', TRUE)),
		'BUN2'=> clean_form_input($this->input->post('BUN2', TRUE)),
		'Creatinine2'=> clean_form_input($this->input->post('Creatinine2', TRUE)),
		'Sodium2'=> clean_form_input($this->input->post('Sodium2', TRUE)),
		'Potassium2'=> clean_form_input($this->input->post('Potassium2', TRUE)),
		'Chloride2'=> clean_form_input($this->input->post('Chloride2', TRUE)),
		'Calcium2'=> clean_form_input($this->input->post('Calcium2', TRUE)),
		'Magnesium2'=> clean_form_input($this->input->post('Magnesium2', TRUE)),
 		'Phosphorus2'=> clean_form_input($this->input->post('Phosphorus2', TRUE)),
		'Total_Protein2'=> clean_form_input($this->input->post('Total_Protein2', TRUE)),
		'Albumin2'=> clean_form_input($this->input->post('Albumin2', TRUE)),
		'Globulin2'=> clean_form_input($this->input->post('Globulin2', TRUE)),
		'AST_SGOT2'=> clean_form_input($this->input->post('AST_SGOT2', TRUE)),
		'ALT_SGPT2'=> clean_form_input($this->input->post('ALT_SGPT2', TRUE)),
		'Alk_Phos2'=> clean_form_input($this->input->post('Alk_Phos2', TRUE)),
		'Total_Bilirubin2'=> clean_form_input($this->input->post('Total_Bilirubin2', TRUE)),
		'Direct_Bilirubin2'=> clean_form_input($this->input->post('Direct_Bilirubin2', TRUE)),
		'Indirect_Bilirubin2'=> clean_form_input($this->input->post('Indirect_Bilirubin2', TRUE)),
                'HDL2'=> clean_form_input($this->input->post('HDL2', TRUE)),
		'LDL2'=> clean_form_input($this->input->post('LDL2', TRUE)),
		'Cholesterol2'=> clean_form_input($this->input->post('Cholesterol2', TRUE)),
		'Triglycerides2'=> clean_form_input($this->input->post('Triglycerides2', TRUE)),
		'Uric_Acid2'=> clean_form_input($this->input->post('Uric_Acid2', TRUE)),
		'Amylase2'=> clean_form_input($this->input->post('Amylase2', TRUE)),
                'Lipase2'=> clean_form_input($this->input->post('Lipase2', TRUE)),
		'CK_Total2'=> clean_form_input($this->input->post('CK_Total2', TRUE)),
		'CK_MB2'=> clean_form_input($this->input->post('CK_MB2', TRUE)),
		'CK_MM2'=> clean_form_input($this->input->post('CK_MM2', TRUE)),
		'Trop_I2'=> clean_form_input($this->input->post('Trop_I2', TRUE)),
                'Myoglobin2'=> clean_form_input($this->input->post('Myoglobin2', TRUE)),
		//col 3
		'Date3'=> clean_form_input($this->input->post('Date3', TRUE)),
		'Time3'=> clean_form_input($this->input->post('Time3', TRUE)),
		'Glucose3'=> clean_form_input($this->input->post('Glucose3', TRUE)),
		'BUN3'=> clean_form_input($this->input->post('BUN3', TRUE)),
		'Creatinine3'=> clean_form_input($this->input->post('Creatinine3', TRUE)),
		'Sodium3'=> clean_form_input($this->input->post('Sodium3', TRUE)),
		'Potassium3'=> clean_form_input($this->input->post('Potassium3', TRUE)),
		'Chloride3'=> clean_form_input($this->input->post('Chloride3', TRUE)),
		'Calcium3'=> clean_form_input($this->input->post('Calcium3', TRUE)),
		'Magnesium3'=> clean_form_input($this->input->post('Magnesium3', TRUE)),
 		'Phosphorus3'=> clean_form_input($this->input->post('Phosphorus3', TRUE)),
		'Total_Protein3'=> clean_form_input($this->input->post('Total_Protein3', TRUE)),
		'Albumin3'=> clean_form_input($this->input->post('Albumin3', TRUE)),
		'Globulin3'=> clean_form_input($this->input->post('Globulin3', TRUE)),
		'AST_SGOT3'=> clean_form_input($this->input->post('AST_SGOT3', TRUE)),
		'ALT_SGPT3'=> clean_form_input($this->input->post('ALT_SGPT3', TRUE)),
		'Alk_Phos3'=> clean_form_input($this->input->post('Alk_Phos3', TRUE)),
		'Total_Bilirubin3'=> clean_form_input($this->input->post('Total_Bilirubin3', TRUE)),
		'Direct_Bilirubin3'=> clean_form_input($this->input->post('Direct_Bilirubin3', TRUE)),
		'Indirect_Bilirubin3'=> clean_form_input($this->input->post('Indirect_Bilirubin3', TRUE)),
                'HDL3'=> clean_form_input($this->input->post('HDL3', TRUE)),
		'LDL3'=> clean_form_input($this->input->post('LDL3', TRUE)),
		'Cholesterol3'=> clean_form_input($this->input->post('Cholesterol3', TRUE)),
		'Triglycerides3'=> clean_form_input($this->input->post('Triglycerides3', TRUE)),
		'Uric_Acid3'=> clean_form_input($this->input->post('Uric_Acid3', TRUE)),
		'Amylase3'=> clean_form_input($this->input->post('Amylase3', TRUE)),
                'Lipase3'=> clean_form_input($this->input->post('Lipase3', TRUE)),
		'CK_Total3'=> clean_form_input($this->input->post('CK_Total3', TRUE)),
		'CK_MB3'=> clean_form_input($this->input->post('CK_MB3', TRUE)),
		'CK_MM3'=> clean_form_input($this->input->post('CK_MM3', TRUE)),
		'Trop_I3'=> clean_form_input($this->input->post('Trop_I3', TRUE)),
                'Myoglobin3'=> clean_form_input($this->input->post('Myoglobin3', TRUE)),
		//col 4
		'Date4'=> clean_form_input($this->input->post('Date4', TRUE)),
		'Time4'=> clean_form_input($this->input->post('Time4', TRUE)),
		'Glucose4'=> clean_form_input($this->input->post('Glucose4', TRUE)),
		'BUN4'=> clean_form_input($this->input->post('BUN4', TRUE)),
		'Creatinine4'=> clean_form_input($this->input->post('Creatinine4', TRUE)),
		'Sodium4'=> clean_form_input($this->input->post('Sodium4', TRUE)),
		'Potassium4'=> clean_form_input($this->input->post('Potassium4', TRUE)),
		'Chloride4'=> clean_form_input($this->input->post('Chloride4', TRUE)),
		'Calcium4'=> clean_form_input($this->input->post('Calcium4', TRUE)),
		'Magnesium4'=> clean_form_input($this->input->post('Magnesium4', TRUE)),
 		'Phosphorus4'=> clean_form_input($this->input->post('Phosphorus4', TRUE)),
		'Total_Protein4'=> clean_form_input($this->input->post('Total_Protein4', TRUE)),
		'Albumin4'=> clean_form_input($this->input->post('Albumin4', TRUE)),
		'Globulin4'=> clean_form_input($this->input->post('Globulin4', TRUE)),
		'AST_SGOT4'=> clean_form_input($this->input->post('AST_SGOT4', TRUE)),
		'ALT_SGPT4'=> clean_form_input($this->input->post('ALT_SGPT4', TRUE)),
		'Alk_Phos4'=> clean_form_input($this->input->post('Alk_Phos4', TRUE)),
		'Total_Bilirubin4'=> clean_form_input($this->input->post('Total_Bilirubin4', TRUE)),
		'Direct_Bilirubin4'=> clean_form_input($this->input->post('Direct_Bilirubin4', TRUE)),
		'Indirect_Bilirubin4'=> clean_form_input($this->input->post('Indirect_Bilirubin4', TRUE)),
                'HDL4'=> clean_form_input($this->input->post('HDL4', TRUE)),
		'LDL4'=> clean_form_input($this->input->post('LDL4', TRUE)),
		'Cholesterol4'=> clean_form_input($this->input->post('Cholesterol4', TRUE)),
		'Triglycerides4'=> clean_form_input($this->input->post('Triglycerides4', TRUE)),
		'Uric_Acid4'=> clean_form_input($this->input->post('Uric_Acid4', TRUE)),
		'Amylase4'=> clean_form_input($this->input->post('Amylase4', TRUE)),
                'Lipase4'=> clean_form_input($this->input->post('Lipase4', TRUE)),
		'CK_Total4'=> clean_form_input($this->input->post('CK_Total4', TRUE)),
		'CK_MB4'=> clean_form_input($this->input->post('CK_MB4', TRUE)),
		'CK_MM4'=> clean_form_input($this->input->post('CK_MM4', TRUE)),
		'Trop_I4'=> clean_form_input($this->input->post('Trop_I4', TRUE)),
                'Myoglobin4'=> clean_form_input($this->input->post('Myoglobin4', TRUE)),
		//col 5
		'Date5'=> clean_form_input($this->input->post('Date5', TRUE)),
		'Time5'=> clean_form_input($this->input->post('Time5', TRUE)),
		'Glucose5'=> clean_form_input($this->input->post('Glucose5', TRUE)),
		'BUN5'=> clean_form_input($this->input->post('BUN5', TRUE)),
		'Creatinine5'=> clean_form_input($this->input->post('Creatinine5', TRUE)),
		'Sodium5'=> clean_form_input($this->input->post('Sodium5', TRUE)),
		'Potassium5'=> clean_form_input($this->input->post('Potassium5', TRUE)),
		'Chloride5'=> clean_form_input($this->input->post('Chloride5', TRUE)),
		'Calcium5'=> clean_form_input($this->input->post('Calcium5', TRUE)),
		'Magnesium5'=> clean_form_input($this->input->post('Magnesium5', TRUE)),
 		'Phosphorus5'=> clean_form_input($this->input->post('Phosphorus5', TRUE)),
		'Total_Protein5'=> clean_form_input($this->input->post('Total_Protein5', TRUE)),
		'Albumin5'=> clean_form_input($this->input->post('Albumin5', TRUE)),
		'Globulin5'=> clean_form_input($this->input->post('Globulin5', TRUE)),
		'AST_SGOT5'=> clean_form_input($this->input->post('AST_SGOT5', TRUE)),
		'ALT_SGPT5'=> clean_form_input($this->input->post('ALT_SGPT5', TRUE)),
		'Alk_Phos5'=> clean_form_input($this->input->post('Alk_Phos5', TRUE)),
		'Total_Bilirubin5'=> clean_form_input($this->input->post('Total_Bilirubin5', TRUE)),
		'Direct_Bilirubin5'=> clean_form_input($this->input->post('Direct_Bilirubin5', TRUE)),
		'Indirect_Bilirubin5'=> clean_form_input($this->input->post('Indirect_Bilirubin5', TRUE)),
                'HDL5'=> clean_form_input($this->input->post('HDL5', TRUE)),
		'LDL5'=> clean_form_input($this->input->post('LDL5', TRUE)),
		'Cholesterol5'=> clean_form_input($this->input->post('Cholesterol5', TRUE)),
		'Triglycerides5'=> clean_form_input($this->input->post('Triglycerides5', TRUE)),
		'Uric_Acid5'=> clean_form_input($this->input->post('Uric_Acid5', TRUE)),
		'Amylase5'=> clean_form_input($this->input->post('Amylase5', TRUE)),
                'Lipase5'=> clean_form_input($this->input->post('Lipase5', TRUE)),
		'CK_Total5'=> clean_form_input($this->input->post('CK_Total5', TRUE)),
		'CK_MB5'=> clean_form_input($this->input->post('CK_MB5', TRUE)),
		'CK_MM5'=> clean_form_input($this->input->post('CK_MM5', TRUE)),
		'Trop_I5'=> clean_form_input($this->input->post('Trop_I5', TRUE)),
                'Myoglobin5'=> clean_form_input($this->input->post('Myoglobin5', TRUE)),
		//col 6
		'Date6'=> clean_form_input($this->input->post('Date6', TRUE)),
		'Time6'=> clean_form_input($this->input->post('Time6', TRUE)),
		'Glucose6'=> clean_form_input($this->input->post('Glucose6', TRUE)),
		'BUN6'=> clean_form_input($this->input->post('BUN6', TRUE)),
		'Creatinine6'=> clean_form_input($this->input->post('Creatinine6', TRUE)),
		'Sodium6'=> clean_form_input($this->input->post('Sodium6', TRUE)),
		'Potassium6'=> clean_form_input($this->input->post('Potassium6', TRUE)),
		'Chloride6'=> clean_form_input($this->input->post('Chloride6', TRUE)),
		'Calcium6'=> clean_form_input($this->input->post('Calcium6', TRUE)),
		'Magnesium6'=> clean_form_input($this->input->post('Magnesium6', TRUE)),
 		'Phosphorus6'=> clean_form_input($this->input->post('Phosphorus6', TRUE)),
		'Total_Protein6'=> clean_form_input($this->input->post('Total_Protein6', TRUE)),
		'Albumin6'=> clean_form_input($this->input->post('Albumin6', TRUE)),
		'Globulin6'=> clean_form_input($this->input->post('Globulin6', TRUE)),
		'AST_SGOT6'=> clean_form_input($this->input->post('AST_SGOT6', TRUE)),
		'ALT_SGPT6'=> clean_form_input($this->input->post('ALT_SGPT6', TRUE)),
		'Alk_Phos6'=> clean_form_input($this->input->post('Alk_Phos6', TRUE)),
		'Total_Bilirubin6'=> clean_form_input($this->input->post('Total_Bilirubin6', TRUE)),
		'Direct_Bilirubin6'=> clean_form_input($this->input->post('Direct_Bilirubin6', TRUE)),
		'Indirect_Bilirubin6'=> clean_form_input($this->input->post('Indirect_Bilirubin6', TRUE)),
                'HDL6'=> clean_form_input($this->input->post('HDL6', TRUE)),
		'LDL6'=> clean_form_input($this->input->post('LDL6', TRUE)),
		'Cholesterol6'=> clean_form_input($this->input->post('Cholesterol6', TRUE)),
		'Triglycerides6'=> clean_form_input($this->input->post('Triglycerides6', TRUE)),
		'Uric_Acid6'=> clean_form_input($this->input->post('Uric_Acid6', TRUE)),
		'Amylase6'=> clean_form_input($this->input->post('Amylase6', TRUE)),
                'Lipase6'=> clean_form_input($this->input->post('Lipase6', TRUE)),
		'CK_Total6'=> clean_form_input($this->input->post('CK_Total6', TRUE)),
		'CK_MB6'=> clean_form_input($this->input->post('CK_MB6', TRUE)),
		'CK_MM6'=> clean_form_input($this->input->post('CK_MM6', TRUE)),
		'Trop_I6'=> clean_form_input($this->input->post('Trop_I6', TRUE)),
                'Myoglobin6'=> clean_form_input($this->input->post('Myoglobin6', TRUE)),
		//col 7
		'Date7'=> clean_form_input($this->input->post('Date7', TRUE)),
		'Time7'=> clean_form_input($this->input->post('Time7', TRUE)),
		'Glucose7'=> clean_form_input($this->input->post('Glucose7', TRUE)),
		'BUN7'=> clean_form_input($this->input->post('BUN7', TRUE)),
		'Creatinine7'=> clean_form_input($this->input->post('Creatinine7', TRUE)),
		'Sodium7'=> clean_form_input($this->input->post('Sodium7', TRUE)),
		'Potassium7'=> clean_form_input($this->input->post('Potassium7', TRUE)),
		'Chloride7'=> clean_form_input($this->input->post('Chloride7', TRUE)),
		'Calcium7'=> clean_form_input($this->input->post('Calcium7', TRUE)),
		'Magnesium7'=> clean_form_input($this->input->post('Magnesium7', TRUE)),
 		'Phosphorus7'=> clean_form_input($this->input->post('Phosphorus7', TRUE)),
		'Total_Protein7'=> clean_form_input($this->input->post('Total_Protein7', TRUE)),
		'Albumin7'=> clean_form_input($this->input->post('Albumin7', TRUE)),
		'Globulin7'=> clean_form_input($this->input->post('Globulin7', TRUE)),
		'AST_SGOT7'=> clean_form_input($this->input->post('AST_SGOT7', TRUE)),
		'ALT_SGPT7'=> clean_form_input($this->input->post('ALT_SGPT7', TRUE)),
		'Alk_Phos7'=> clean_form_input($this->input->post('Alk_Phos7', TRUE)),
		'Total_Bilirubin7'=> clean_form_input($this->input->post('Total_Bilirubin7', TRUE)),
		'Direct_Bilirubin7'=> clean_form_input($this->input->post('Direct_Bilirubin7', TRUE)),
		'Indirect_Bilirubin7'=> clean_form_input($this->input->post('Indirect_Bilirubin7', TRUE)),
                'HDL7'=> clean_form_input($this->input->post('HDL7', TRUE)),
		'LDL7'=> clean_form_input($this->input->post('LDL7', TRUE)),
		'Cholesterol7'=> clean_form_input($this->input->post('Cholesterol7', TRUE)),
		'Triglycerides7'=> clean_form_input($this->input->post('Triglycerides7', TRUE)),
		'Uric_Acid7'=> clean_form_input($this->input->post('Uric_Acid7', TRUE)),
		'Amylase7'=> clean_form_input($this->input->post('Amylase7', TRUE)),
                'Lipase7'=> clean_form_input($this->input->post('Lipase7', TRUE)),
		'CK_Total7'=> clean_form_input($this->input->post('CK_Total7', TRUE)),
		'CK_MB7'=> clean_form_input($this->input->post('CK_MB7', TRUE)),
		'CK_MM7'=> clean_form_input($this->input->post('CK_MM7', TRUE)),
		'Trop_I7'=> clean_form_input($this->input->post('Trop_I7', TRUE)),
                'Myoglobin7'=> clean_form_input($this->input->post('Myoglobin7', TRUE)),
		//col 8
		'Date8'=> clean_form_input($this->input->post('Date8', TRUE)),
		'Time8'=> clean_form_input($this->input->post('Time8', TRUE)),
		'Glucose8'=> clean_form_input($this->input->post('Glucose8', TRUE)),
		'BUN8'=> clean_form_input($this->input->post('BUN8', TRUE)),
		'Creatinine8'=> clean_form_input($this->input->post('Creatinine8', TRUE)),
		'Sodium8'=> clean_form_input($this->input->post('Sodium8', TRUE)),
		'Potassium8'=> clean_form_input($this->input->post('Potassium8', TRUE)),
		'Chloride8'=> clean_form_input($this->input->post('Chloride8', TRUE)),
		'Calcium8'=> clean_form_input($this->input->post('Calcium8', TRUE)),
		'Magnesium8'=> clean_form_input($this->input->post('Magnesium8', TRUE)),
 		'Phosphorus8'=> clean_form_input($this->input->post('Phosphorus8', TRUE)),
		'Total_Protein8'=> clean_form_input($this->input->post('Total_Protein8', TRUE)),
		'Albumin8'=> clean_form_input($this->input->post('Albumin8', TRUE)),
		'Globulin8'=> clean_form_input($this->input->post('Globulin8', TRUE)),
		'AST_SGOT8'=> clean_form_input($this->input->post('AST_SGOT8', TRUE)),
		'ALT_SGPT8'=> clean_form_input($this->input->post('ALT_SGPT8', TRUE)),
		'Alk_Phos8'=> clean_form_input($this->input->post('Alk_Phos8', TRUE)),
		'Total_Bilirubin8'=> clean_form_input($this->input->post('Total_Bilirubin8', TRUE)),
		'Direct_Bilirubin8'=> clean_form_input($this->input->post('Direct_Bilirubin8', TRUE)),
		'Indirect_Bilirubin8'=> clean_form_input($this->input->post('Indirect_Bilirubin8', TRUE)),
                'HDL8'=> clean_form_input($this->input->post('HDL8', TRUE)),
		'LDL8'=> clean_form_input($this->input->post('LDL8', TRUE)),
		'Cholesterol8'=> clean_form_input($this->input->post('Cholesterol8', TRUE)),
		'Triglycerides8'=> clean_form_input($this->input->post('Triglycerides8', TRUE)),
		'Uric_Acid8'=> clean_form_input($this->input->post('Uric_Acid8', TRUE)),
		'Amylase8'=> clean_form_input($this->input->post('Amylase8', TRUE)),
                'Lipase8'=> clean_form_input($this->input->post('Lipase8', TRUE)),
		'CK_Total8'=> clean_form_input($this->input->post('CK_Total8', TRUE)),
		'CK_MB8'=> clean_form_input($this->input->post('CK_MB8', TRUE)),
		'CK_MM8'=> clean_form_input($this->input->post('CK_MM8', TRUE)),
		'Trop_I8'=> clean_form_input($this->input->post('Trop_I8', TRUE)),
                'Myoglobin8'=> clean_form_input($this->input->post('Myoglobin8', TRUE)),
		//col 9
		'Date9'=> clean_form_input($this->input->post('Date9', TRUE)),
		'Time9'=> clean_form_input($this->input->post('Time9', TRUE)),
		'Glucose9'=> clean_form_input($this->input->post('Glucose9', TRUE)),
		'BUN9'=> clean_form_input($this->input->post('BUN9', TRUE)),
		'Creatinine9'=> clean_form_input($this->input->post('Creatinine9', TRUE)),
		'Sodium9'=> clean_form_input($this->input->post('Sodium9', TRUE)),
		'Potassium9'=> clean_form_input($this->input->post('Potassium9', TRUE)),
		'Chloride9'=> clean_form_input($this->input->post('Chloride9', TRUE)),
		'Calcium9'=> clean_form_input($this->input->post('Calcium9', TRUE)),
		'Magnesium9'=> clean_form_input($this->input->post('Magnesium9', TRUE)),
 		'Phosphorus9'=> clean_form_input($this->input->post('Phosphorus9', TRUE)),
		'Total_Protein9'=> clean_form_input($this->input->post('Total_Protein9', TRUE)),
		'Albumin9'=> clean_form_input($this->input->post('Albumin9', TRUE)),
		'Globulin9'=> clean_form_input($this->input->post('Globulin9', TRUE)),
		'AST_SGOT9'=> clean_form_input($this->input->post('AST_SGOT9', TRUE)),
		'ALT_SGPT9'=> clean_form_input($this->input->post('ALT_SGPT9', TRUE)),
		'Alk_Phos9'=> clean_form_input($this->input->post('Alk_Phos9', TRUE)),
		'Total_Bilirubin9'=> clean_form_input($this->input->post('Total_Bilirubin9', TRUE)),
		'Direct_Bilirubin9'=> clean_form_input($this->input->post('Direct_Bilirubin9', TRUE)),
		'Indirect_Bilirubin9'=> clean_form_input($this->input->post('Indirect_Bilirubin9', TRUE)),
                'HDL9'=> clean_form_input($this->input->post('HDL9', TRUE)),
		'LDL9'=> clean_form_input($this->input->post('LDL9', TRUE)),
		'Cholesterol9'=> clean_form_input($this->input->post('Cholesterol9', TRUE)),
		'Triglycerides9'=> clean_form_input($this->input->post('Triglycerides9', TRUE)),
		'Uric_Acid9'=> clean_form_input($this->input->post('Uric_Acid9', TRUE)),
		'Amylase9'=> clean_form_input($this->input->post('Amylase9', TRUE)),
                'Lipase9'=> clean_form_input($this->input->post('Lipase9', TRUE)),
		'CK_Total9'=> clean_form_input($this->input->post('CK_Total9', TRUE)),
		'CK_MB9'=> clean_form_input($this->input->post('CK_MB9', TRUE)),
		'CK_MM9'=> clean_form_input($this->input->post('CK_MM9', TRUE)),
		'Trop_I9'=> clean_form_input($this->input->post('Trop_I9', TRUE)),
                'Myoglobin9'=> clean_form_input($this->input->post('Myoglobin9', TRUE)),
		//col 10
		'Date10'=> clean_form_input($this->input->post('Date10', TRUE)),
		'Time10'=> clean_form_input($this->input->post('Time10', TRUE)),
		'Glucose10'=> clean_form_input($this->input->post('Glucose10', TRUE)),
		'BUN10'=> clean_form_input($this->input->post('BUN10', TRUE)),
		'Creatinine10'=> clean_form_input($this->input->post('Creatinine10', TRUE)),
		'Sodium10'=> clean_form_input($this->input->post('Sodium10', TRUE)),
		'Potassium10'=> clean_form_input($this->input->post('Potassium10', TRUE)),
		'Chloride10'=> clean_form_input($this->input->post('Chloride10', TRUE)),
		'Calcium10'=> clean_form_input($this->input->post('Calcium10', TRUE)),
		'Magnesium10'=> clean_form_input($this->input->post('Magnesium10', TRUE)),
 		'Phosphorus10'=> clean_form_input($this->input->post('Phosphorus10', TRUE)),
		'Total_Protein10'=> clean_form_input($this->input->post('Total_Protein10', TRUE)),
		'Albumin10'=> clean_form_input($this->input->post('Albumin10', TRUE)),
		'Globulin10'=> clean_form_input($this->input->post('Globulin10', TRUE)),
		'AST_SGOT10'=> clean_form_input($this->input->post('AST_SGOT10', TRUE)),
		'ALT_SGPT10'=> clean_form_input($this->input->post('ALT_SGPT10', TRUE)),
		'Alk_Phos10'=> clean_form_input($this->input->post('Alk_Phos10', TRUE)),
		'Total_Bilirubin10'=> clean_form_input($this->input->post('Total_Bilirubin10', TRUE)),
		'Direct_Bilirubin10'=> clean_form_input($this->input->post('Direct_Bilirubin10', TRUE)),
		'Indirect_Bilirubin10'=> clean_form_input($this->input->post('Indirect_Bilirubin10', TRUE)),
                'HDL10'=> clean_form_input($this->input->post('HDL10', TRUE)),
		'LDL10'=> clean_form_input($this->input->post('LDL10', TRUE)),
		'Cholesterol10'=> clean_form_input($this->input->post('Cholesterol10', TRUE)),
		'Triglycerides10'=> clean_form_input($this->input->post('Triglycerides10', TRUE)),
		'Uric_Acid10'=> clean_form_input($this->input->post('Uric_Acid10', TRUE)),
		'Amylase10'=> clean_form_input($this->input->post('Amylase10', TRUE)),
                'Lipase10'=> clean_form_input($this->input->post('Lipase10', TRUE)),
		'CK_Total10'=> clean_form_input($this->input->post('CK_Total10', TRUE)),
		'CK_MB10'=> clean_form_input($this->input->post('CK_MB10', TRUE)),
		'CK_MM10'=> clean_form_input($this->input->post('CK_MM10', TRUE)),
		'Trop_I10'=> clean_form_input($this->input->post('Trop_I10', TRUE)),
                'Myoglobin10'=> clean_form_input($this->input->post('Myoglobin10', TRUE)),
		//col 11
		'Date11'=> clean_form_input($this->input->post('Date11', TRUE)),
		'Time11'=> clean_form_input($this->input->post('Time11', TRUE)),
		'Glucose11'=> clean_form_input($this->input->post('Glucose11', TRUE)),
		'BUN11'=> clean_form_input($this->input->post('BUN11', TRUE)),
		'Creatinine11'=> clean_form_input($this->input->post('Creatinine11', TRUE)),
		'Sodium11'=> clean_form_input($this->input->post('Sodium11', TRUE)),
		'Potassium11'=> clean_form_input($this->input->post('Potassium11', TRUE)),
		'Chloride11'=> clean_form_input($this->input->post('Chloride11', TRUE)),
		'Calcium11'=> clean_form_input($this->input->post('Calcium11', TRUE)),
		'Magnesium11'=> clean_form_input($this->input->post('Magnesium11', TRUE)),
 		'Phosphorus11'=> clean_form_input($this->input->post('Phosphorus11', TRUE)),
		'Total_Protein11'=> clean_form_input($this->input->post('Total_Protein11', TRUE)),
		'Albumin11'=> clean_form_input($this->input->post('Albumin11', TRUE)),
		'Globulin11'=> clean_form_input($this->input->post('Globulin11', TRUE)),
		'AST_SGOT11'=> clean_form_input($this->input->post('AST_SGOT11', TRUE)),
		'ALT_SGPT11'=> clean_form_input($this->input->post('ALT_SGPT11', TRUE)),
		'Alk_Phos11'=> clean_form_input($this->input->post('Alk_Phos11', TRUE)),
		'Total_Bilirubin11'=> clean_form_input($this->input->post('Total_Bilirubin11', TRUE)),
		'Direct_Bilirubin11'=> clean_form_input($this->input->post('Direct_Bilirubin11', TRUE)),
		'Indirect_Bilirubin11'=> clean_form_input($this->input->post('Indirect_Bilirubin11', TRUE)),
                'HDL11'=> clean_form_input($this->input->post('HDL11', TRUE)),
		'LDL11'=> clean_form_input($this->input->post('LDL11', TRUE)),
		'Cholesterol11'=> clean_form_input($this->input->post('Cholesterol11', TRUE)),
		'Triglycerides11'=> clean_form_input($this->input->post('Triglycerides11', TRUE)),
		'Uric_Acid11'=> clean_form_input($this->input->post('Uric_Acid11', TRUE)),
		'Amylase11'=> clean_form_input($this->input->post('Amylase11', TRUE)),
                'Lipase11'=> clean_form_input($this->input->post('Lipase11', TRUE)),
		'CK_Total11'=> clean_form_input($this->input->post('CK_Total11', TRUE)),
		'CK_MB11'=> clean_form_input($this->input->post('CK_MB11', TRUE)),
		'CK_MM11'=> clean_form_input($this->input->post('CK_MM11', TRUE)),
		'Trop_I11'=> clean_form_input($this->input->post('Trop_I11', TRUE)),
                'Myoglobin11'=> clean_form_input($this->input->post('Myoglobin11', TRUE)),
		//col 12
		'Date12'=> clean_form_input($this->input->post('Date12', TRUE)),
		'Time12'=> clean_form_input($this->input->post('Time12', TRUE)),
		'Glucose12'=> clean_form_input($this->input->post('Glucose12', TRUE)),
		'BUN12'=> clean_form_input($this->input->post('BUN12', TRUE)),
		'Creatinine12'=> clean_form_input($this->input->post('Creatinine12', TRUE)),
		'Sodium12'=> clean_form_input($this->input->post('Sodium12', TRUE)),
		'Potassium12'=> clean_form_input($this->input->post('Potassium12', TRUE)),
		'Chloride12'=> clean_form_input($this->input->post('Chloride12', TRUE)),
		'Calcium12'=> clean_form_input($this->input->post('Calcium12', TRUE)),
		'Magnesium12'=> clean_form_input($this->input->post('Magnesium12', TRUE)),
 		'Phosphorus12'=> clean_form_input($this->input->post('Phosphorus12', TRUE)),
		'Total_Protein12'=> clean_form_input($this->input->post('Total_Protein12', TRUE)),
		'Albumin12'=> clean_form_input($this->input->post('Albumin12', TRUE)),
		'Globulin12'=> clean_form_input($this->input->post('Globulin12', TRUE)),
		'AST_SGOT12'=> clean_form_input($this->input->post('AST_SGOT12', TRUE)),
		'ALT_SGPT12'=> clean_form_input($this->input->post('ALT_SGPT12', TRUE)),
		'Alk_Phos12'=> clean_form_input($this->input->post('Alk_Phos12', TRUE)),
		'Total_Bilirubin12'=> clean_form_input($this->input->post('Total_Bilirubin12', TRUE)),
		'Direct_Bilirubin12'=> clean_form_input($this->input->post('Direct_Bilirubin12', TRUE)),
		'Indirect_Bilirubin12'=> clean_form_input($this->input->post('Indirect_Bilirubin12', TRUE)),
                'HDL12'=> clean_form_input($this->input->post('HDL12', TRUE)),
		'LDL12'=> clean_form_input($this->input->post('LDL12', TRUE)),
		'Cholesterol12'=> clean_form_input($this->input->post('Cholesterol12', TRUE)),
		'Triglycerides12'=> clean_form_input($this->input->post('Triglycerides12', TRUE)),
		'Uric_Acid12'=> clean_form_input($this->input->post('Uric_Acid12', TRUE)),
		'Amylase12'=> clean_form_input($this->input->post('Amylase12', TRUE)),
                'Lipase12'=> clean_form_input($this->input->post('Lipase12', TRUE)),
		'CK_Total12'=> clean_form_input($this->input->post('CK_Total12', TRUE)),
		'CK_MB12'=> clean_form_input($this->input->post('CK_MB12', TRUE)),
		'CK_MM12'=> clean_form_input($this->input->post('CK_MM12', TRUE)),
		'Trop_I12'=> clean_form_input($this->input->post('Trop_I12', TRUE)),
                'Myoglobin12'=> clean_form_input($this->input->post('Myoglobin12', TRUE)),
		//col 13
		'Date13'=> clean_form_input($this->input->post('Date13', TRUE)),
		'Time13'=> clean_form_input($this->input->post('Time13', TRUE)),
		'Glucose13'=> clean_form_input($this->input->post('Glucose13', TRUE)),
		'BUN13'=> clean_form_input($this->input->post('BUN13', TRUE)),
		'Creatinine13'=> clean_form_input($this->input->post('Creatinine13', TRUE)),
		'Sodium13'=> clean_form_input($this->input->post('Sodium13', TRUE)),
		'Potassium13'=> clean_form_input($this->input->post('Potassium13', TRUE)),
		'Chloride13'=> clean_form_input($this->input->post('Chloride13', TRUE)),
		'Calcium13'=> clean_form_input($this->input->post('Calcium13', TRUE)),
		'Magnesium13'=> clean_form_input($this->input->post('Magnesium13', TRUE)),
 		'Phosphorus13'=> clean_form_input($this->input->post('Phosphorus13', TRUE)),
		'Total_Protein13'=> clean_form_input($this->input->post('Total_Protein13', TRUE)),
		'Albumin13'=> clean_form_input($this->input->post('Albumin13', TRUE)),
		'Globulin13'=> clean_form_input($this->input->post('Globulin13', TRUE)),
		'AST_SGOT13'=> clean_form_input($this->input->post('AST_SGOT13', TRUE)),
		'ALT_SGPT13'=> clean_form_input($this->input->post('ALT_SGPT13', TRUE)),
		'Alk_Phos13'=> clean_form_input($this->input->post('Alk_Phos13', TRUE)),
		'Total_Bilirubin13'=> clean_form_input($this->input->post('Total_Bilirubin13', TRUE)),
		'Direct_Bilirubin13'=> clean_form_input($this->input->post('Direct_Bilirubin13', TRUE)),
		'Indirect_Bilirubin13'=> clean_form_input($this->input->post('Indirect_Bilirubin13', TRUE)),
                'HDL13'=> clean_form_input($this->input->post('HDL13', TRUE)),
		'LDL13'=> clean_form_input($this->input->post('LDL13', TRUE)),
		'Cholesterol13'=> clean_form_input($this->input->post('Cholesterol13', TRUE)),
		'Triglycerides13'=> clean_form_input($this->input->post('Triglycerides13', TRUE)),
		'Uric_Acid13'=> clean_form_input($this->input->post('Uric_Acid13', TRUE)),
		'Amylase13'=> clean_form_input($this->input->post('Amylase13', TRUE)),
                'Lipase13'=> clean_form_input($this->input->post('Lipase13', TRUE)),
		'CK_Total13'=> clean_form_input($this->input->post('CK_Total13', TRUE)),
		'CK_MB13'=> clean_form_input($this->input->post('CK_MB13', TRUE)),
		'CK_MM13'=> clean_form_input($this->input->post('CK_MM13', TRUE)),
		'Trop_I13'=> clean_form_input($this->input->post('Trop_I13', TRUE)),
                'Myoglobin13'=> clean_form_input($this->input->post('Myoglobin13', TRUE)),
		//col 14
		'Date14'=> clean_form_input($this->input->post('Date14', TRUE)),
		'Time14'=> clean_form_input($this->input->post('Time14', TRUE)),
		'Glucose14'=> clean_form_input($this->input->post('Glucose14', TRUE)),
		'BUN14'=> clean_form_input($this->input->post('BUN14', TRUE)),
		'Creatinine14'=> clean_form_input($this->input->post('Creatinine14', TRUE)),
		'Sodium14'=> clean_form_input($this->input->post('Sodium14', TRUE)),
		'Potassium14'=> clean_form_input($this->input->post('Potassium14', TRUE)),
		'Chloride14'=> clean_form_input($this->input->post('Chloride14', TRUE)),
		'Calcium14'=> clean_form_input($this->input->post('Calcium14', TRUE)),
		'Magnesium14'=> clean_form_input($this->input->post('Magnesium14', TRUE)),
 		'Phosphorus14'=> clean_form_input($this->input->post('Phosphorus14', TRUE)),
		'Total_Protein14'=> clean_form_input($this->input->post('Total_Protein14', TRUE)),
		'Albumin14'=> clean_form_input($this->input->post('Albumin14', TRUE)),
		'Globulin14'=> clean_form_input($this->input->post('Globulin14', TRUE)),
		'AST_SGOT14'=> clean_form_input($this->input->post('AST_SGOT14', TRUE)),
		'ALT_SGPT14'=> clean_form_input($this->input->post('ALT_SGPT14', TRUE)),
		'Alk_Phos14'=> clean_form_input($this->input->post('Alk_Phos14', TRUE)),
		'Total_Bilirubin14'=> clean_form_input($this->input->post('Total_Bilirubin14', TRUE)),
		'Direct_Bilirubin14'=> clean_form_input($this->input->post('Direct_Bilirubin14', TRUE)),
		'Indirect_Bilirubin14'=> clean_form_input($this->input->post('Indirect_Bilirubin14', TRUE)),
                'HDL14'=> clean_form_input($this->input->post('HDL14', TRUE)),
		'LDL14'=> clean_form_input($this->input->post('LDL14', TRUE)),
		'Cholesterol14'=> clean_form_input($this->input->post('Cholesterol14', TRUE)),
		'Triglycerides14'=> clean_form_input($this->input->post('Triglycerides14', TRUE)),
		'Uric_Acid14'=> clean_form_input($this->input->post('Uric_Acid14', TRUE)),
		'Amylase14'=> clean_form_input($this->input->post('Amylase14', TRUE)),
                'Lipase14'=> clean_form_input($this->input->post('Lipase14', TRUE)),
		'CK_Total14'=> clean_form_input($this->input->post('CK_Total14', TRUE)),
		'CK_MB14'=> clean_form_input($this->input->post('CK_MB14', TRUE)),
		'CK_MM14'=> clean_form_input($this->input->post('CK_MM14', TRUE)),
		'Trop_I14'=> clean_form_input($this->input->post('Trop_I14', TRUE)),
                'Myoglobin14'=> clean_form_input($this->input->post('Myoglobin14', TRUE)),
		//col 15
		'Date15'=> clean_form_input($this->input->post('Date15', TRUE)),
		'Time15'=> clean_form_input($this->input->post('Time15', TRUE)),
		'Glucose15'=> clean_form_input($this->input->post('Glucose15', TRUE)),
		'BUN15'=> clean_form_input($this->input->post('BUN15', TRUE)),
		'Creatinine15'=> clean_form_input($this->input->post('Creatinine15', TRUE)),
		'Sodium15'=> clean_form_input($this->input->post('Sodium15', TRUE)),
		'Potassium15'=> clean_form_input($this->input->post('Potassium15', TRUE)),
		'Chloride15'=> clean_form_input($this->input->post('Chloride15', TRUE)),
		'Calcium15'=> clean_form_input($this->input->post('Calcium15', TRUE)),
		'Magnesium15'=> clean_form_input($this->input->post('Magnesium15', TRUE)),
 		'Phosphorus15'=> clean_form_input($this->input->post('Phosphorus15', TRUE)),
		'Total_Protein15'=> clean_form_input($this->input->post('Total_Protein15', TRUE)),
		'Albumin15'=> clean_form_input($this->input->post('Albumin15', TRUE)),
		'Globulin15'=> clean_form_input($this->input->post('Globulin15', TRUE)),
		'AST_SGOT15'=> clean_form_input($this->input->post('AST_SGOT15', TRUE)),
		'ALT_SGPT15'=> clean_form_input($this->input->post('ALT_SGPT15', TRUE)),
		'Alk_Phos15'=> clean_form_input($this->input->post('Alk_Phos15', TRUE)),
		'Total_Bilirubin15'=> clean_form_input($this->input->post('Total_Bilirubin15', TRUE)),
		'Direct_Bilirubin15'=> clean_form_input($this->input->post('Direct_Bilirubin15', TRUE)),
		'Indirect_Bilirubin15'=> clean_form_input($this->input->post('Indirect_Bilirubin15', TRUE)),
                'HDL15'=> clean_form_input($this->input->post('HDL15', TRUE)),
		'LDL15'=> clean_form_input($this->input->post('LDL15', TRUE)),
		'Cholesterol15'=> clean_form_input($this->input->post('Cholesterol15', TRUE)),
		'Triglycerides15'=> clean_form_input($this->input->post('Triglycerides15', TRUE)),
		'Uric_Acid15'=> clean_form_input($this->input->post('Uric_Acid15', TRUE)),
		'Amylase15'=> clean_form_input($this->input->post('Amylase15', TRUE)),
                'Lipase15'=> clean_form_input($this->input->post('Lipase15', TRUE)),
		'CK_Total15'=> clean_form_input($this->input->post('CK_Total15', TRUE)),
		'CK_MB15'=> clean_form_input($this->input->post('CK_MB15', TRUE)),
		'CK_MM15'=> clean_form_input($this->input->post('CK_MM15', TRUE)),
		'Trop_I15'=> clean_form_input($this->input->post('Trop_I15', TRUE)),
                'Myoglobin15'=> clean_form_input($this->input->post('Myoglobin15', TRUE)),


                );
		$cs_bloodchem = implode(",", $bloodchem);
                $data = array(
                               'bloodchem'=>$cs_bloodchem
                 );
              $this->db->where('a_id', $aid);
              $this->db->update('admissions', $data);
             //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit bloodchem id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);           
            }
        function edit_protime($aid)
       	{
	 $protime = array(
                //col 1
		'Date1'=> clean_form_input($this->input->post('Date1', TRUE)),
		'Time1'=> clean_form_input($this->input->post('Time1', TRUE)),
		'Protime_Ctrl1'=> clean_form_input($this->input->post('Protime_Ctrl1', TRUE)),
		'Protime_Patient1'=> clean_form_input($this->input->post('Protime_Patient1', TRUE)),
		'Protime_Activity1'=> clean_form_input($this->input->post('Protime_Activity1', TRUE)),
		'Protime_INR1'=> clean_form_input($this->input->post('Protime_INR1', TRUE)),
		'aPTT_Ctrl1'=> clean_form_input($this->input->post('aPTT_Ctrl1', TRUE)),
		'aPTT_Patient1'=> clean_form_input($this->input->post('aPTT_Patient1', TRUE)),
                //col 2
		'Date2'=> clean_form_input($this->input->post('Date2', TRUE)),
		'Time2'=> clean_form_input($this->input->post('Time2', TRUE)),
		'Protime_Ctrl2'=> clean_form_input($this->input->post('Protime_Ctrl2', TRUE)),
		'Protime_Patient2'=> clean_form_input($this->input->post('Protime_Patient2', TRUE)),
		'Protime_Activity2'=> clean_form_input($this->input->post('Protime_Activity2', TRUE)),
		'Protime_INR2'=> clean_form_input($this->input->post('Protime_INR2', TRUE)),
		'aPTT_Ctrl2'=> clean_form_input($this->input->post('aPTT_Ctrl2', TRUE)),
		'aPTT_Patient2'=> clean_form_input($this->input->post('aPTT_Patient2', TRUE)),	
		//col 3
		'Date3'=> clean_form_input($this->input->post('Date3', TRUE)),
		'Time3'=> clean_form_input($this->input->post('Time3', TRUE)),
		'Protime_Ctrl3'=> clean_form_input($this->input->post('Protime_Ctrl3', TRUE)),
		'Protime_Patient3'=> clean_form_input($this->input->post('Protime_Patient3', TRUE)),
		'Protime_Activity3'=> clean_form_input($this->input->post('Protime_Activity3', TRUE)),
		'Protime_INR3'=> clean_form_input($this->input->post('Protime_INR3', TRUE)),
		'aPTT_Ctrl3'=> clean_form_input($this->input->post('aPTT_Ctrl3', TRUE)),
		'aPTT_Patient3'=> clean_form_input($this->input->post('aPTT_Patient3', TRUE)),
		//col 4
		'Date4'=> clean_form_input($this->input->post('Date4', TRUE)),
		'Time4'=> clean_form_input($this->input->post('Time4', TRUE)),
		'Protime_Ctrl4'=> clean_form_input($this->input->post('Protime_Ctrl4', TRUE)),
		'Protime_Patient4'=> clean_form_input($this->input->post('Protime_Patient4', TRUE)),
		'Protime_Activity4'=> clean_form_input($this->input->post('Protime_Activity4', TRUE)),
		'Protime_INR4'=> clean_form_input($this->input->post('Protime_INR4', TRUE)),
		'aPTT_Ctrl4'=> clean_form_input($this->input->post('aPTT_Ctrl4', TRUE)),
		'aPTT_Patient4'=> clean_form_input($this->input->post('aPTT_Patient4', TRUE)),
		//col 5
		'Date5'=> clean_form_input($this->input->post('Date5', TRUE)),
		'Time5'=> clean_form_input($this->input->post('Time5', TRUE)),
		'Protime_Ctrl5'=> clean_form_input($this->input->post('Protime_Ctrl5', TRUE)),
		'Protime_Patient5'=> clean_form_input($this->input->post('Protime_Patient5', TRUE)),
		'Protime_Activity5'=> clean_form_input($this->input->post('Protime_Activity5', TRUE)),
		'Protime_INR5'=> clean_form_input($this->input->post('Protime_INR5', TRUE)),
		'aPTT_Ctrl5'=> clean_form_input($this->input->post('aPTT_Ctrl5', TRUE)),
		'aPTT_Patient5'=> clean_form_input($this->input->post('aPTT_Patient5', TRUE)),
		//col 6
		'Date6'=> clean_form_input($this->input->post('Date6', TRUE)),
		'Time6'=> clean_form_input($this->input->post('Time6', TRUE)),
		'Protime_Ctrl6'=> clean_form_input($this->input->post('Protime_Ctrl6', TRUE)),
		'Protime_Patient6'=> clean_form_input($this->input->post('Protime_Patient6', TRUE)),
		'Protime_Activity6'=> clean_form_input($this->input->post('Protime_Activity6', TRUE)),
		'Protime_INR6'=> clean_form_input($this->input->post('Protime_INR6', TRUE)),
		'aPTT_Ctrl6'=> clean_form_input($this->input->post('aPTT_Ctrl6', TRUE)),
		'aPTT_Patient6'=> clean_form_input($this->input->post('aPTT_Patient6', TRUE)),
		//col 7
		'Date7'=> clean_form_input($this->input->post('Date7', TRUE)),
		'Time7'=> clean_form_input($this->input->post('Time7', TRUE)),
		'Protime_Ctrl7'=> clean_form_input($this->input->post('Protime_Ctrl7', TRUE)),
		'Protime_Patient7'=> clean_form_input($this->input->post('Protime_Patient7', TRUE)),
		'Protime_Activity7'=> clean_form_input($this->input->post('Protime_Activity7', TRUE)),
		'Protime_INR7'=> clean_form_input($this->input->post('Protime_INR7', TRUE)),
		'aPTT_Ctrl7'=> clean_form_input($this->input->post('aPTT_Ctrl7', TRUE)),
		'aPTT_Patient7'=> clean_form_input($this->input->post('aPTT_Patient7', TRUE)),
		//col 8
		'Date8'=> clean_form_input($this->input->post('Date8', TRUE)),
		'Time8'=> clean_form_input($this->input->post('Time8', TRUE)),
		'Protime_Ctrl8'=> clean_form_input($this->input->post('Protime_Ctrl8', TRUE)),
		'Protime_Patient8'=> clean_form_input($this->input->post('Protime_Patient8', TRUE)),
		'Protime_Activity8'=> clean_form_input($this->input->post('Protime_Activity8', TRUE)),
		'Protime_INR8'=> clean_form_input($this->input->post('Protime_INR8', TRUE)),
		'aPTT_Ctrl8'=> clean_form_input($this->input->post('aPTT_Ctrl8', TRUE)),
		'aPTT_Patient8'=> clean_form_input($this->input->post('aPTT_Patient8', TRUE)),
		//col 9
		'Date9'=> clean_form_input($this->input->post('Date9', TRUE)),
		'Time9'=> clean_form_input($this->input->post('Time9', TRUE)),
		'Protime_Ctrl9'=> clean_form_input($this->input->post('Protime_Ctrl9', TRUE)),
		'Protime_Patient9'=> clean_form_input($this->input->post('Protime_Patient9', TRUE)),
		'Protime_Activity9'=> clean_form_input($this->input->post('Protime_Activity9', TRUE)),
		'Protime_INR9'=> clean_form_input($this->input->post('Protime_INR9', TRUE)),
		'aPTT_Ctrl9'=> clean_form_input($this->input->post('aPTT_Ctrl9', TRUE)),
		'aPTT_Patient9'=> clean_form_input($this->input->post('aPTT_Patient9', TRUE)),
		//col 10
		'Date10'=> clean_form_input($this->input->post('Date10', TRUE)),
		'Time10'=> clean_form_input($this->input->post('Time10', TRUE)),
		'Protime_Ctrl10'=> clean_form_input($this->input->post('Protime_Ctrl10', TRUE)),
		'Protime_Patient10'=> clean_form_input($this->input->post('Protime_Patient10', TRUE)),
		'Protime_Activity10'=> clean_form_input($this->input->post('Protime_Activity10', TRUE)),
		'Protime_INR10'=> clean_form_input($this->input->post('Protime_INR10', TRUE)),
		'aPTT_Ctrl10'=> clean_form_input($this->input->post('aPTT_Ctrl10', TRUE)),
		'aPTT_Patient10'=> clean_form_input($this->input->post('aPTT_Patient10', TRUE)),
		//col 11
		'Date11'=> clean_form_input($this->input->post('Date11', TRUE)),
		'Time11'=> clean_form_input($this->input->post('Time11', TRUE)),
		'Protime_Ctrl11'=> clean_form_input($this->input->post('Protime_Ctrl11', TRUE)),
		'Protime_Patient11'=> clean_form_input($this->input->post('Protime_Patient11', TRUE)),
		'Protime_Activity11'=> clean_form_input($this->input->post('Protime_Activity11', TRUE)),
		'Protime_INR11'=> clean_form_input($this->input->post('Protime_INR11', TRUE)),
		'aPTT_Ctrl11'=> clean_form_input($this->input->post('aPTT_Ctrl11', TRUE)),
		'aPTT_Patient11'=> clean_form_input($this->input->post('aPTT_Patient11', TRUE)),
		//col 12
		'Date12'=> clean_form_input($this->input->post('Date12', TRUE)),
		'Time12'=> clean_form_input($this->input->post('Time12', TRUE)),
		'Protime_Ctrl12'=> clean_form_input($this->input->post('Protime_Ctrl12', TRUE)),
		'Protime_Patient12'=> clean_form_input($this->input->post('Protime_Patient12', TRUE)),
		'Protime_Activity12'=> clean_form_input($this->input->post('Protime_Activity12', TRUE)),
		'Protime_INR12'=> clean_form_input($this->input->post('Protime_INR12', TRUE)),
		'aPTT_Ctrl12'=> clean_form_input($this->input->post('aPTT_Ctrl12', TRUE)),
		'aPTT_Patient12'=> clean_form_input($this->input->post('aPTT_Patient12', TRUE)),
		//col 13
		'Date13'=> clean_form_input($this->input->post('Date13', TRUE)),
		'Time13'=> clean_form_input($this->input->post('Time13', TRUE)),
		'Protime_Ctrl13'=> clean_form_input($this->input->post('Protime_Ctrl13', TRUE)),
		'Protime_Patient13'=> clean_form_input($this->input->post('Protime_Patient13', TRUE)),
		'Protime_Activity13'=> clean_form_input($this->input->post('Protime_Activity13', TRUE)),
		'Protime_INR13'=> clean_form_input($this->input->post('Protime_INR13', TRUE)),
		'aPTT_Ctrl13'=> clean_form_input($this->input->post('aPTT_Ctrl13', TRUE)),
		'aPTT_Patient13'=> clean_form_input($this->input->post('aPTT_Patient13', TRUE)),	
		//col 14
		'Date14'=> clean_form_input($this->input->post('Date14', TRUE)),
		'Time14'=> clean_form_input($this->input->post('Time14', TRUE)),
		'Protime_Ctrl14'=> clean_form_input($this->input->post('Protime_Ctrl14', TRUE)),
		'Protime_Patient14'=> clean_form_input($this->input->post('Protime_Patient14', TRUE)),
		'Protime_Activity14'=> clean_form_input($this->input->post('Protime_Activity14', TRUE)),
		'Protime_INR14'=> clean_form_input($this->input->post('Protime_INR14', TRUE)),
		'aPTT_Ctrl14'=> clean_form_input($this->input->post('aPTT_Ctrl14', TRUE)),
		'aPTT_Patient14'=> clean_form_input($this->input->post('aPTT_Patient14', TRUE)),
		//col 15
		'Date15'=> clean_form_input($this->input->post('Date15', TRUE)),
		'Time15'=> clean_form_input($this->input->post('Time15', TRUE)),
		'Protime_Ctrl15'=> clean_form_input($this->input->post('Protime_Ctrl15', TRUE)),
		'Protime_Patient15'=> clean_form_input($this->input->post('Protime_Patient15', TRUE)),
		'Protime_Activity15'=> clean_form_input($this->input->post('Protime_Activity15', TRUE)),
		'Protime_INR15'=> clean_form_input($this->input->post('Protime_INR15', TRUE)),
		'aPTT_Ctrl15'=> clean_form_input($this->input->post('aPTT_Ctrl15', TRUE)),
		'aPTT_Patient15'=> clean_form_input($this->input->post('aPTT_Patient15', TRUE)),
		);
		$cs_protime = implode(",", $protime);
                $data = array(
                               'protime'=>$cs_protime
                 );
              $this->db->where('a_id', $aid);
              $this->db->update('admissions', $data);
             //log update task in text file
                     $file = "ward_admission_log.txt"; 
                     $handle = fopen($file, 'a');
                     date_default_timezone_set('Asia/Hong_Kong');
                     $data = date('m/d/Y h:i:s a', time()).", IP Add: ".$this->session->userdata('ip_address').", user:".$_SERVER['PHP_AUTH_USER'].", task: edit protime id#".$aid.", date_in:".$this->date_in."\r\n"; 
                     fwrite($handle, $data);   


	}
	 function edit_urine($aid)
       	{
	 $urine = array(
		//col 1
		'Date1'=> clean_form_input($this->input->post('Date1', TRUE)),
		'Time1'=> clean_form_input($this->input->post('Time1', TRUE)),
                'Color1'=> clean_form_input($this->input->post('Color1', TRUE)),
		'Transparency1'=> clean_form_input($this->input->post('Transparency1', TRUE)),
		'SG1'=> clean_form_input($this->input->post('SG1', TRUE)),
		'pH1'=> clean_form_input($this->input->post('pH1', TRUE)),
		'Sugar1'=> clean_form_input($this->input->post('Sugar1', TRUE)),
		'Albumin1'=> clean_form_input($this->input->post('Albumin1', TRUE)),
		'RBC1'=> clean_form_input($this->input->post('RBC1', TRUE)),
		'WBC1'=> clean_form_input($this->input->post('WBC1', TRUE)),
		'Casts1'=> clean_form_input($this->input->post('Casts1', TRUE)),
		'Crystals1'=> clean_form_input($this->input->post('Crystals1', TRUE)),
		'Epith_Cells1'=> clean_form_input($this->input->post('Epith_Cells1', TRUE)),
		'Bacteria1'=> clean_form_input($this->input->post('Bacteria1', TRUE)),
		'Mucus_Threads1'=> clean_form_input($this->input->post('Mucus_Threads1', TRUE)),
		//col 2
		'Date2'=> clean_form_input($this->input->post('Date2', TRUE)),
		'Time2'=> clean_form_input($this->input->post('Time2', TRUE)),
                'Color2'=> clean_form_input($this->input->post('Color2', TRUE)),
		'Transparency2'=> clean_form_input($this->input->post('Transparency2', TRUE)),
		'SG2'=> clean_form_input($this->input->post('SG2', TRUE)),
		'pH2'=> clean_form_input($this->input->post('pH2', TRUE)),
		'Sugar2'=> clean_form_input($this->input->post('Sugar2', TRUE)),
		'Albumin2'=> clean_form_input($this->input->post('Albumin2', TRUE)),
		'RBC2'=> clean_form_input($this->input->post('RBC2', TRUE)),
		'WBC2'=> clean_form_input($this->input->post('WBC2', TRUE)),
		'Casts2'=> clean_form_input($this->input->post('Casts2', TRUE)),
		'Crystals2'=> clean_form_input($this->input->post('Crystals2', TRUE)),
		'Epith_Cells2'=> clean_form_input($this->input->post('Epith_Cells2', TRUE)),
		'Bacteria2'=> clean_form_input($this->input->post('Bacteria2', TRUE)),
		'Mucus_Threads2'=> clean_form_input($this->input->post('Mucus_Threads2', TRUE)),
		//col 3
		'Date3'=> clean_form_input($this->input->post('Date3', TRUE)),
		'Time3'=> clean_form_input($this->input->post('Time3', TRUE)),
                'Color3'=> clean_form_input($this->input->post('Color3', TRUE)),
		'Transparency3'=> clean_form_input($this->input->post('Transparency3', TRUE)),
		'SG3'=> clean_form_input($this->input->post('SG3', TRUE)),
		'pH3'=> clean_form_input($this->input->post('pH3', TRUE)),
		'Sugar3'=> clean_form_input($this->input->post('Sugar3', TRUE)),
		'Albumin3'=> clean_form_input($this->input->post('Albumin3', TRUE)),
		'RBC3'=> clean_form_input($this->input->post('RBC3', TRUE)),
		'WBC3'=> clean_form_input($this->input->post('WBC3', TRUE)),
		'Casts3'=> clean_form_input($this->input->post('Casts3', TRUE)),
		'Crystals3'=> clean_form_input($this->input->post('Crystals3', TRUE)),
		'Epith_Cells3'=> clean_form_input($this->input->post('Epith_Cells3', TRUE)),
		'Bacteria3'=> clean_form_input($this->input->post('Bacteria3', TRUE)),
		'Mucus_Threads3'=> clean_form_input($this->input->post('Mucus_Threads3', TRUE)),
		//col 4
		'Date4'=> clean_form_input($this->input->post('Date4', TRUE)),
		'Time4'=> clean_form_input($this->input->post('Time4', TRUE)),
                'Color4'=> clean_form_input($this->input->post('Color4', TRUE)),
		'Transparency4'=> clean_form_input($this->input->post('Transparency4', TRUE)),
		'SG4'=> clean_form_input($this->input->post('SG4', TRUE)),
		'pH4'=> clean_form_input($this->input->post('pH4', TRUE)),
		'Sugar4'=> clean_form_input($this->input->post('Sugar4', TRUE)),
		'Albumin4'=> clean_form_input($this->input->post('Albumin4', TRUE)),
		'RBC4'=> clean_form_input($this->input->post('RBC4', TRUE)),
		'WBC4'=> clean_form_input($this->input->post('WBC4', TRUE)),
		'Casts4'=> clean_form_input($this->input->post('Casts4', TRUE)),
		'Crystals4'=> clean_form_input($this->input->post('Crystals4', TRUE)),
		'Epith_Cells4'=> clean_form_input($this->input->post('Epith_Cells4', TRUE)),
		'Bacteria4'=> clean_form_input($this->input->post('Bacteria4', TRUE)),
		'Mucus_Threads4'=> clean_form_input($this->input->post('Mucus_Threads4', TRUE)),
		//col 5
		'Date5'=> clean_form_input($this->input->post('Date5', TRUE)),
		'Time5'=> clean_form_input($this->input->post('Time5', TRUE)),
                'Color5'=> clean_form_input($this->input->post('Color5', TRUE)),
		'Transparency5'=> clean_form_input($this->input->post('Transparency5', TRUE)),
		'SG5'=> clean_form_input($this->input->post('SG5', TRUE)),
		'pH5'=> clean_form_input($this->input->post('pH5', TRUE)),
		'Sugar5'=> clean_form_input($this->input->post('Sugar5', TRUE)),
		'Albumin5'=> clean_form_input($this->input->post('Albumin5', TRUE)),
		'RBC5'=> clean_form_input($this->input->post('RBC5', TRUE)),
		'WBC5'=> clean_form_input($this->input->post('WBC5', TRUE)),
		'Casts5'=> clean_form_input($this->input->post('Casts5', TRUE)),
		'Crystals5'=> clean_form_input($this->input->post('Crystals5', TRUE)),
		'Epith_Cells5'=> clean_form_input($this->input->post('Epith_Cells5', TRUE)),
		'Bacteria5'=> clean_form_input($this->input->post('Bacteria5', TRUE)),
		'Mucus_Threads5'=> clean_form_input($this->input->post('Mucus_Threads5', TRUE)),
		//col 6
		'Date6'=> clean_form_input($this->input->post('Date6', TRUE)),
		'Time6'=> clean_form_input($this->input->post('Time6', TRUE)),
                'Color6'=> clean_form_input($this->input->post('Color6', TRUE)),
		'Transparency6'=> clean_form_input($this->input->post('Transparency6', TRUE)),
		'SG6'=> clean_form_input($this->input->post('SG6', TRUE)),
		'pH6'=> clean_form_input($this->input->post('pH6', TRUE)),
		'Sugar6'=> clean_form_input($this->input->post('Sugar6', TRUE)),
		'Albumin6'=> clean_form_input($this->input->post('Albumin6', TRUE)),
		'R